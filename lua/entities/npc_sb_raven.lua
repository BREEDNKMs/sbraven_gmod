AddCSLuaFile() 

sound.Add( 
{ 
    name = "M_Raven_vo_Cast_S_Cue", 
    channel = CHAN_BODY, 
    volume = 1, 
    soundlevel = 100, 
    sound = {"Dialogue/ActionVoice/Raven/vo_Raven_cast_s1_VO.wav","Dialogue/ActionVoice/Raven/vo_Raven_cast_s2_VO.wav"}
}) 
sound.Add( 
{ 
    name = "M_Raven_Cloth_XL_Cue", 
    channel = CHAN_BODY, 
    volume = 1, 
    soundlevel = 100, 
    sound = {"Skill/Monster/Raven/M_Raven_Cloth_L_1.wav","Character/SE/SE_Cloth_whoosh_03.wav","Character/SE/SE_Cloth_whoosh_04.wav","Skill/Monster/Raven/M_Raven_Cloth_L_2.wav","Skill/Monster/Raven/M_Raven_Cloth_L_3.wav","Character/SE/SE_Cloth_whoosh_01.wav"}
}) 
sound.Add( 
{ 
    name = "M_Raven_vo_ATK_S_Cue", 
    channel = CHAN_BODY, 
    volume = 1, 
    soundlevel = 100, 
    sound = {"Dialogue/ActionVoice/Raven/vo_Raven_atk_s1_VO.wav","Dialogue/ActionVoice/Raven/vo_Raven_atk_s2_VO.wav","Dialogue/ActionVoice/Raven/vo_Raven_atk_s4_VO.wav"}
}) 
sound.Add( 
{ 
    name = "M_Raven_SwordSwish_XL_Cue", 
    channel = CHAN_BODY, 
    volume = 1, 
    soundlevel = 100, 
    sound = {"Skill/Monster/Raven/M_Raven_SwordSwish_XL_layer.wav","Skill/Monster/Raven/M_Raven_SwordSwish_XL_C_1.wav","Skill/Monster/Raven/M_Raven_SwordSwish_XL_C_2.wav","Skill/Monster/Raven/M_Raven_SwordSwish_XL_C_3.wav"}
}) 
sound.Add( 
{ 
    name = "M_Raven_SwordSwish_XL_C_Cue", 
    channel = CHAN_BODY, 
    volume = 1, 
    soundlevel = 100, 
    sound = {"Skill/Monster/Raven/M_Raven_SwordSwish_XL_C_1.wav","Skill/Monster/Raven/M_Raven_SwordSwish_XL_C_2.wav","Skill/Monster/Raven/M_Raven_SwordSwish_XL_layer.wav","Skill/Monster/Raven/M_Raven_SwordSwish_XL_C_3.wav"}
}) 
sound.Add( 
{ 
    name = "M_Raven_Cloth_M_Cue", 
    channel = CHAN_BODY, 
    volume = 1, 
    soundlevel = 100, 
    sound = {"Skill/Monster/Raven/M_Raven_Cloth_L_1.wav","Skill/Monster/Raven/M_Raven_Cloth_L_2.wav","Skill/Monster/Raven/M_Raven_Cloth_L_3.wav"}
}) 
sound.Add( 
{ 
    name = "M_Raven_Cloth_XL3_Cue", 
    channel = CHAN_BODY, 
    volume = 1, 
    soundlevel = 100, 
    sound = {"Skill/PC/Evade/PC_Evade_Jump_2.wav","Skill/Monster/Raven/M_Raven_Cloth_XL2_1.wav","Skill/Monster/Raven/M_Raven_Cloth_XL2_2.wav"}
}) 
sound.Add( 
{ 
    name = "M_Raven_Bodyfall_L_Cue", 
    channel = CHAN_BODY, 
    volume = 1, 
    soundlevel = 100, 
    sound = {"Character/SE/KnockDown/NEW/PC_SE_KnockDown_Bodyfall_Dirt_1.wav","MON/Statue/SE_Move_Rock_Debris_bodyfall_01.wav","FootSteps/monster/Raven/M_Raven_Bodyfall_L_1.wav","FootSteps/monster/Raven/M_Raven_Bodyfall_L_2.wav","MON/Statue/SE_Move_Rock_Debris_bodyfall_02.wav","FootSteps/monster/Mon_Bodyfall_M_Default_1.wav"}
}) 
sound.Add( 
{ 
    name = "M_Raven_Cloth_L_Cue", 
    channel = CHAN_BODY, 
    volume = 1, 
    soundlevel = 100, 
    sound = {"Skill/Monster/Raven/M_Raven_Cloth_L_1.wav","Skill/Monster/Raven/M_Raven_Cloth_L_2.wav","Skill/Monster/Raven/M_Raven_Cloth_L_3.wav"}
}) 
sound.Add( 
{ 
    name = "M_Raven_Bodyfall_S_Cue", 
    channel = CHAN_BODY, 
    volume = 1, 
    soundlevel = 100, 
    sound = {"FootSteps/monster/Raven/M_Raven_Bodyfall_S_1.wav","FootSteps/monster/Raven/M_Raven_Bodyfall_S_2.wav","MON/Statue/SE_Move_Rock_Debris_bodyfall_01.wav","MON/Statue/SE_Move_Rock_Debris_bodyfall_02.wav","FootSteps/monster/Mon_Bodyfall_M_Default_1.wav"}
}) 
sound.Add( 
{ 
    name = "M_Raven_vo_P_Cue", 
    channel = CHAN_BODY, 
    volume = 1, 
    soundlevel = 100, 
    sound = {"Dialogue/ActionVoice/Raven/vo_Raven_dmg_l3_VO.wav","Dialogue/ActionVoice/Raven/vo_Raven_dmg_l4_VO.wav"}
}) 
sound.Add( 
{ 
    name = "M_Raven_vo_ATK_L_Cue", 
    channel = CHAN_BODY, 
    volume = 1, 
    soundlevel = 100, 
    sound = {"Dialogue/ActionVoice/Raven/vo_Raven_atk_l1_VO.wav","Dialogue/ActionVoice/Raven/vo_Raven_atk_l2_VO.wav","Dialogue/ActionVoice/Raven/vo_Raven_atk_l3_VO.wav","Dialogue/ActionVoice/Raven/vo_Raven_atk_l4_VO.wav"}
}) 
sound.Add( 
{ 
    name = "M_Raven_SwordSwish_S_Cue", 
    channel = CHAN_BODY, 
    volume = 1, 
    soundlevel = 100, 
    sound = {"Skill/Monster/Raven/M_Raven_SwordSwish_M_1.wav","Skill/Monster/Raven/M_Raven_SwordSwish_M_2.wav","Skill/Monster/Raven/M_Raven_SwordSwish_M_3.wav"}
}) 
sound.Add( 
{ 
    name = "M_Raven_SwordSwish_L_Cue", 
    channel = CHAN_BODY, 
    volume = 1, 
    soundlevel = 100, 
    sound = {"Skill/Monster/Raven/M_Raven_SwordSwish_L_1.wav","Skill/Monster/Raven/M_Raven_SwordSwish_L_2.wav","Skill/Monster/Raven/M_Raven_SwordSwish_L_3.wav"}
}) 
sound.Add( 
{ 
    name = "M_Raven_vo_Cast_M_Cue", 
    channel = CHAN_BODY, 
    volume = 1, 
    soundlevel = 100, 
    sound = {"Dialogue/ActionVoice/Raven/vo_Raven_cast_m1_VO.wav","Dialogue/ActionVoice/Raven/vo_Raven_cast_m2_VO.wav","Dialogue/ActionVoice/Raven/vo_Raven_cast_m3_VO.wav"}
}) 
sound.Add( 
{ 
    name = "mon_swish_m_cue", 
    channel = CHAN_BODY, 
    volume = 1, 
    soundlevel = 100, 
    sound = {"Character/Skill/Swing_sword_Short_06.wav","Character/Skill/Swing_sword_Short_07.wav","Character/Skill/Swing_sword_Short_08.wav","Character/Skill/Swing_sword_Short_09.wav"}
}) 
sound.Add( 
{ 
    name = "M_Raven_SwordSwish_XS_Cue", 
    channel = CHAN_BODY, 
    volume = 1, 
    soundlevel = 100, 
    sound = {"Skill/Monster/Raven/M_Raven_SwordSwish_XS_1.wav","Skill/Monster/Raven/M_Raven_SwordSwish_XS_2.wav","Skill/Monster/Raven/M_Raven_SwordSwish_XS_3.wav"}
}) 
sound.Add( 
{ 
    name = "M_Raven_Cloth_XL2_Ce", 
    channel = CHAN_BODY, 
    volume = 1, 
    soundlevel = 100, 
    sound = {"Skill/Monster/Raven/M_Raven_Cloth_XL2_1.wav","Skill/Monster/Raven/M_Raven_Cloth_XL2_2.wav"}
}) 
sound.Add( 
{ 
    name = "M_Raven_Skill_Stab_Cue", 
    channel = CHAN_BODY, 
    volume = 1, 
    soundlevel = 100, 
    sound = {"Character/Hit/PCHitSound/CSS_Hit_Hammer_Critical_1.wav","Skill/Monster/Raven/M_Raven_Skill_Stab_1.wav","Character/Hit/PCHitSound/CSS_Hit_Hammer_Critical_3.wav","Skill/Monster/Raven/M_Raven_Skill_Stab_3.wav","Character/Hit/Hit_Sword_Defualt_10.wav","Character/Hit/Hit_Sword_Defualt_11.wav","Character/Hit/Hit_Sword_Defualt_08.wav","Character/Hit/Hit_Sword_Defualt_09.wav","Character/Hit/Hit_Sword_Defualt_07.wav"}
}) 
sound.Add( 
{ 
    name = "M_Raven_vo_Dmg_S_Cue", 
    channel = CHAN_BODY, 
    volume = 1, 
    soundlevel = 100, 
    sound = {"Dialogue/ActionVoice/Raven/vo_Raven_dmg_s1_VO.wav","Dialogue/ActionVoice/Raven/vo_Raven_dmg_s2_VO.wav","Dialogue/ActionVoice/Raven/vo_Raven_dmg_s3_VO.wav","Dialogue/ActionVoice/Raven/vo_Raven_dmg_s4_VO.wav","Dialogue/ActionVoice/Raven/vo_Raven_dmg_s5_VO.wav"}
}) 
sound.Add( 
{ 
    name = "M_Raven_SwordSwish_M_Cue", 
    channel = CHAN_BODY, 
    volume = 1, 
    soundlevel = 100, 
    sound = {"Skill/Monster/Raven/M_Raven_SwordSwish_M_1.wav","Skill/Monster/Raven/M_Raven_SwordSwish_M_2.wav","Skill/Monster/Raven/M_Raven_SwordSwish_M_3.wav"}
}) 
sound.Add( 
{ 
    name = "M_Raven_vo_Cast_L_Cue", 
    channel = CHAN_BODY, 
    volume = 1, 
    soundlevel = 100, 
    sound = {"Dialogue/ActionVoice/Raven/vo_Raven_cast_l1_VO.wav","Dialogue/ActionVoice/Raven/vo_Raven_cast_l2_VO.wav"}
}) 
sound.Add( 
{ 
    name = "M_Raven_vo_Dmg_L_Cue", 
    channel = CHAN_BODY, 
    volume = 1, 
    soundlevel = 100, 
    sound = {"Dialogue/ActionVoice/Raven/vo_Raven_dmg_l1_VO.wav","Dialogue/ActionVoice/Raven/vo_Raven_dmg_l2_VO.wav","Dialogue/ActionVoice/Raven/vo_Raven_dmg_l3_VO.wav","Dialogue/ActionVoice/Raven/vo_Raven_dmg_l4_VO.wav"}
}) 

sound.Add( 
{ 
    name = "M_Raven_vo_SkillLaugh_Cue", 
    channel = CHAN_BODY, 
    volume = 1, 
    soundlevel = 100, 
    sound = {"Dialogue/ActionVoice/Raven/vo_Raven_laugh_01_VO.wav","Dialogue/ActionVoice/Raven/vo_Raven_laugh_02_VO.wav"}
}) 


-- stuff related to health, shield is in CharacterTable.json 
-- skilltable has skill information and the skill tree it starts from skillactivesteptable 
-- SelectSchedule accesses M_Raven_AI.json and starting from root node "ObjectName": "BTComposite_Selector'M_Raven_AI:BTComposite_Selector_38'" 
-- checking whether the target & self is alive 
-- then proceeds to child nodes 
ENT.Base = "npc_unreali_female" 
ENT.Type 			= "ai" 
ENT.Spawnable = false 
ENT.AdminOnly = false 
ENT.PrintName		= "Raven" 
ENT.Author			= "DevilHawk" 

ENT.NPC_AlertSound	= "" 
ENT.NPC_IdleSound 	= "" 
ENT.NPC_GroupIdleSound 	= "" 
ENT.NPC_MeleeHitSound = "Unreali_Nali.MeleeHit" 
ENT.NPC_PainSound 	= "M_Raven_vo_Dmg_L_Cue" 
ENT.NPC_PainSoundWater 	= "Unreali_Female.HurtUnderWater" 
ENT.npc_health 		= 248304 -- "MaxHP": 248304, "MaxShield": 4805, 
ENT.npc_model		= "models/alvaroports/sbraven2.mdl" 
ENT.bHasInnateMelee1 = false 
ENT.m_fMaxYawSpeed = 360 -- "RotateAnglePerSecond": 360.0, 
ENT.SBAI_BlackBoard = { } 

-- childcomposite = nexttask 
-- childtask = starttask 
-- decorators = condition 
ENT.SBAI_BehaviorTree = {
  {
    Condition = {
      SBBTDecorator_SbIsAlive_0 = {
        ActorType = "Target",
        CheckType = "Alive",
        FlowAbortMode = "Both"
      }
    },
    NextTask = {
      {
        Condition = {
          SBBTDecorator_SbDetectResult_1 = {
            CompareDetectResult = "AIDetectResult_Detect"
          }
        },
        ObjectName = "SBBTTask_SbDetectTarget'M_Raven_AI:SBBTTask_SbDetectTarget_1'",
        StartTask = {
          SBBTTask_SbDetectTarget_1 = {
            bComa = true,
            bEnemy = true
          }
        }
      },
      {
        Condition = {
          SBBTDecorator_SbIsAlive_1 = {
            ActorType = "Target",
            CheckType = "Coma",
            FlowAbortMode = "Both"
          }
        },
        NextTask = {
          {
            Condition = {},
            ObjectName = "SBBTTask_SbWait'M_Raven_AI:SBBTTask_SbWait_0'",
            StartTask = {
              SBBTTask_SbWait_0 = {
                WaitTime = 1
              }
            }
          }
        },
        ObjectName = "BTComposite_Selector'M_Raven_AI:BTComposite_Selector_34'"
      },
      {
        Condition = {
          SBBTDecorator_SbIsAlive_2 = {
            ActorType = "Target",
            CheckType = "Alive",
            FlowAbortMode = "Both"
          }
        },
        NextTask = {
          {
            Condition = {
              SBBTDecorator_SbCheckActorEffect_21 = {
                ActorType = "Target",
                EffectAlias = "Item_Resurrection_Ground",
                bActive = true,
                bInverseCondition = false
              }
            },
            ObjectName = "SBBTTask_SbWait'M_Raven_AI:SBBTTask_SbWait_1'",
            StartTask = {
              SBBTTask_SbWait_1 = {
                WaitTime = 2
              }
            }
          },
          {
            Condition = {
              SBBTDecorator_SbCheckActorEffect_1 = {
                ActorType = "Target",
                FlowAbortMode = "Self",
                OrCheck_EffectAliasArray = {
                  "Item_Resurrection_Ground",
                  "Getup",
                  "FastGetup",
                  "KnockDownForward",
                  "KnockDownBackward",
                  "Down",
                  "DownFaceUp",
                  "DownFaceUp_E",
                  "DownFaceDown",
                  "DownFaceDown_E",
                  "KnockDownBackward_Eve",
                  "KnockDownForward_Eve",
                  "KnockDownBackwardTumbling_Eve",
                  "KnockDownForwardTumbling_Eve",
                  "LV_FinishQTE_FailDown",
                  "M_Raven_BetaGrab_HitL",
                  "M_Raven_BetaGrab_HitE",
                  "M_Raven_BetaGrabChain_HitL",
                  "M_Raven_BetaGrabChain_HitE",
                  "M_Raven_BetaCounterGrab_HitL",
                  "M_Raven_BetaCounterGrab_HitE"
                },
                bActive = true,
                bInverseCondition = false
              }
            },
            NextTask = {
              {
                Condition = {
                  SBBTDecorator_SbTimeLimit_2 = {
                    LimitTime = 3.6000000000000001,
                    TimerName = "AbnormalTimer"
                  }
                },
                ObjectName = "SBBTTask_SbCautionToTarget'M_Raven_AI:SBBTTask_SbCautionToTarget_2'",
                StartTask = {
                  SBBTTask_SbCautionToTarget_2 = {
                    MaxDistance = 1200,
                    SetMoveType = "ESBCautionToTargetMoveType::Side",
                    SideMoveMaxDistance = 2000,
                    SideMoveMinDistance = 2000,
                    WaitCheckTime = 5,
                    WaitCountByGroup = 1,
                    bIgnoreRestartSelf = true,
                    bLockOn = true
                  }
                }
              }
            },
            ObjectName = "BTComposite_Selector'M_Raven_AI:BTComposite_Selector_9'"
          },
          {
            Condition = {
              SBBTDecorator_SbAggroLevel_1 = {
                CompareAggroLevelArray = {
                  "AIAggroLevel_Peaceful"
                }
              }
            },
            NextTask = {
              {
                Condition = {
                  SBBTDecorator_SbBlackboard_1 = {
                    CompareOP = "Equal",
                    KeyName = "SwordBuffFX"
                  }
                },
                NextTask = {
                  {
                    Condition = {},
                    ObjectName = "SBBTTask_SbBlackboard'M_Raven_AI:SBBTTask_SbBlackboard_0'",
                    StartTask = {
                      SBBTTask_SbBlackboard_0 = {
                        IntValue = 1,
                        KeyName = "SwordBuffFX",
                        bReturnSucceeded = true
                      }
                    }
                  },
                  {
                    Condition = {
                      SBBTDecorator_SbCheckActorEffect_29 = {
                        ActorType = "Target",
                        EffectAlias = "M_Raven_BuffFX",
                        bActive = true,
                        bInverseCondition = true
                      }
                    },
                    ObjectName = "SBBTTask_SbUseEffect'M_Raven_AI:SBBTTask_SbUseEffect_1'",
                    StartTask = {
                      SBBTTask_SbUseEffect_1 = {
                        EffectAlias = {
                          "M_Raven_BuffFX"
                        },
                        bSelfActor = true
                      }
                    }
                  }
                },
                ObjectName = "BTComposite_Sequence'M_Raven_AI:BTComposite_Sequence_13'"
              },
              {
                Condition = {
                  SBBTDecorator_SbCheckActorStat_2 = {
                    CheckStat = "ActorStatType_HP",
                    CheckValue = 60,
                    CompareOP = "Greater",
                    NodeName = "SB_CheckActorStat(HP>60)",
                    bRateValue = true
                  },
                  SBBTDecorator_SbCheckStance_2 = {
                    StanceName = "M_Raven_Default"
                  }
                },
                NextTask = {
                  {
                    Condition = {
                      SBBTDecorator_SbBlackboard_6 = {
                        CompareOP = "Equal",
                        KeyName = "BB1"
                      }
                    },
                    NextTask = {
                      {
                        Condition = {},
                        ObjectName = "SBBTTask_SbUseableTimeReset'M_Raven_AI:SBBTTask_SbUseableTimeReset_5'",
                        StartTask = {
                          SBBTTask_SbUseableTimeReset_5 = {
                            KeyName = "Timer_Approach",
                            NodeName = "SB_UseableTimeReset(Timer_Approach)",
                            SetCycleTimeValue = -1,
                            SetInitialTimeValue = 5
                          }
                        }
                      },
                      {
                        Condition = {},
                        ObjectName = "SBBTTask_SbUseableTimeReset'M_Raven_AI:SBBTTask_SbUseableTimeReset_4'",
                        StartTask = {
                          SBBTTask_SbUseableTimeReset_4 = {
                            KeyName = "Timer_8Seconds",
                            NodeName = "SB_UseableTimeReset(Timer_8Seconds)",
                            SetCycleTimeValue = -1,
                            SetInitialTimeValue = 8
                          }
                        }
                      },
                      {
                        Condition = {},
                        ObjectName = "SBBTTask_SbUseableTimeReset'M_Raven_AI:SBBTTask_SbUseableTimeReset_0'",
                        StartTask = {
                          SBBTTask_SbUseableTimeReset_0 = {
                            KeyName = "Timer_NoGuard",
                            NodeName = "SB_UseableTimeReset(Timer_NoGuard)",
                            SetCycleTimeValue = -1,
                            SetInitialTimeValue = 15
                          }
                        }
                      },
                      {
                        Condition = {},
                        ObjectName = "SBBTTask_SbUseableTimeReset'M_Raven_AI:SBBTTask_SbUseableTimeReset_1'",
                        StartTask = {
                          SBBTTask_SbUseableTimeReset_1 = {
                            KeyName = "Timer_20Seconds",
                            NodeName = "SB_UseableTimeReset(Timer_20Seconds)",
                            SetCycleTimeValue = -1,
                            SetInitialTimeValue = 20
                          }
                        }
                      },
                      {
                        Condition = {},
                        ObjectName = "SBBTTask_SbUseableTimeReset'M_Raven_AI:SBBTTask_SbUseableTimeReset_7'",
                        StartTask = {
                          SBBTTask_SbUseableTimeReset_7 = {
                            KeyName = "Timer_MoveBack",
                            NodeName = "SB_UseableTimeReset(Timer_MoveBack)",
                            SetCycleTimeValue = -1,
                            SetInitialTimeValue = 30
                          }
                        }
                      },
                      {
                        Condition = {},
                        ObjectName = "SBBTTask_SbUseableTimeReset'M_Raven_AI:SBBTTask_SbUseableTimeReset_6'",
                        StartTask = {
                          SBBTTask_SbUseableTimeReset_6 = {
                            KeyName = "Timer_EvasionSkill",
                            NodeName = "SB_UseableTimeReset(Timer_EvasionSkill)",
                            SetCycleTimeValue = 1.5,
                            SetInitialTimeValue = 1
                          }
                        }
                      },
                      {
                        Condition = {},
                        ObjectName = "SBBTTask_SbUseEffect'M_Raven_AI:SBBTTask_SbUseEffect_0'",
                        StartTask = {
                          SBBTTask_SbUseEffect_0 = {
                            EffectAlias = {
                              "M_Raven_QTETimer"
                            },
                            bSelfActor = true
                          }
                        }
                      },
                      {
                        Condition = {},
                        ObjectName = "SBBTTask_SbBlackboard'M_Raven_AI:SBBTTask_SbBlackboard_12'",
                        StartTask = {
                          SBBTTask_SbBlackboard_12 = {
                            IntValue = 1,
                            KeyName = "BB1",
                            bReturnSucceeded = true
                          }
                        }
                      }
                    },
                    ObjectName = "BTComposite_Sequence'M_Raven_AI:BTComposite_Sequence_45'"
                  },
                  {
                    Condition = {
                      SBBTDecorator_SbAimMe_2 = {},
                      SBBTDecorator_SbBlackboard_7 = {
                        CompareOP = "Equal",
                        KeyName = "FirstShot"
                      }
                    },
                    NextTask = {
                      {
                        Condition = {},
                        ObjectName = "SBBTTask_SbBlackboard'M_Raven_AI:SBBTTask_SbBlackboard_25'",
                        StartTask = {
                          SBBTTask_SbBlackboard_25 = {
                            IntValue = 1,
                            KeyName = "FirstShot",
                            bReturnSucceeded = true
                          }
                        }
                      },
                      {
                        Condition = {
                          SBBTDecorator_SbRandom_3 = {
                            CheckValue = 50,
                            CompareOP = "LessOrEqual",
                            RandomRange = 100
                          }
                        },
                        ObjectName = "SBBTTask_SbUseSkill'M_Raven_AI:SBBTTask_SbUseSkill_12'",
                        StartTask = {
                          SBBTTask_SbUseSkill_12 = {
                            "M_Raven_EvadeLeft",
                            "M_Raven_EvadeRight",
                            SkillComboType = "ESBAISkillComboType::TableCommand",
                            bUseSkillCommand = true
                          }
                        }
                      }
                    },
                    ObjectName = "BTComposite_Sequence'M_Raven_AI:BTComposite_Sequence_41'"
                  },
                  {
                    Condition = {
                      SBBTDecorator_SbCheckActorEffect_35 = {
                        ActorType = "Target",
                        EffectAlias = "M_Common_HitProjectileResult",
                        bActive = true,
                        bInverseCondition = false
                      },
                      SBBTDecorator_SbRandom_1 = {
                        CheckValue = 50,
                        CompareOP = "LessOrEqual",
                        RandomRange = 100
                      }
                    },
                    NextTask = {
                      {
                        Condition = {},
                        ObjectName = "SBBTTask_SbUseSkill'M_Raven_AI:SBBTTask_SbUseSkill_11'",
                        StartTask = {
                          SBBTTask_SbUseSkill_11 = {
                            "M_Raven_EvadeLeft",
                            "M_Raven_EvadeRight",
                            SkillComboType = "ESBAISkillComboType::TableCommand",
                            bUseSkillCommand = true
                          }
                        }
                      }
                    },
                    ObjectName = "BTComposite_Sequence'M_Raven_AI:BTComposite_Sequence_35'"
                  },
                  {
                    Condition = {
                      SBBTDecorator_SbCheckActorEffect_49 = {
                        ActorType = "Target",
                        EffectAlias = "P_Eve_Beta_SwordAura",
                        bActive = true,
                        bInverseCondition = false
                      },
                      SBBTDecorator_SbDistanceToTarget_23 = {
                        CompareOP = "GreaterOrEqual",
                        Distance = 300
                      }
                    },
                    NextTask = {
                      {
                        Condition = {},
                        ObjectName = "SBBTTask_SbUseSkill'M_Raven_AI:SBBTTask_SbUseSkill_14'",
                        StartTask = {
                          SBBTTask_SbUseSkill_14 = {
                            "M_Raven_BetaEvadeLeft",
                            "M_Raven_BetaEvadeRight",
                            SkillComboType = "ESBAISkillComboType::TableCommand",
                            bUseSkillCommand = true
                          }
                        }
                      }
                    },
                    ObjectName = "BTComposite_Sequence'M_Raven_AI:BTComposite_Sequence_24'"
                  },
                  {
                    Condition = {
                      SBBTDecorator_SbCheckActorEffect_53 = {
                        ActorType = "Target",
                        EffectAlias = "P_Eve_Beta_SwordAura2",
                        bActive = true,
                        bInverseCondition = false
                      },
                      SBBTDecorator_SbDistanceToTarget_24 = {
                        CompareOP = "GreaterOrEqual",
                        Distance = 300
                      }
                    },
                    NextTask = {
                      {
                        Condition = {},
                        ObjectName = "SBBTTask_SbUseSkill'M_Raven_AI:SBBTTask_SbUseSkill_0'",
                        StartTask = {
                          SBBTTask_SbUseSkill_0 = {
                            "M_Raven_BetaEvadeLeft",
                            "M_Raven_BetaEvadeRight",
                            SkillComboType = "ESBAISkillComboType::TableCommand",
                            bUseSkillCommand = true
                          }
                        }
                      }
                    },
                    ObjectName = "BTComposite_Sequence'M_Raven_AI:BTComposite_Sequence_23'"
                  },
                  {
                    Condition = {
                      SBBTDecorator_SbCheckActorEffect_54 = {
                        ActorType = "Target",
                        EffectAlias = "M_Raven_RushWaitTime",
                        FlowAbortMode = "Self",
                        bActive = true,
                        bInverseCondition = false
                      },
                      SBBTDecorator_SbCheckActorEffect_55 = {
                        ActorType = "Target",
                        EffectAlias = "P_Eve_Beta_SwordAura2",
                        FlowAbortMode = "Self",
                        bActive = true,
                        bInverseCondition = true
                      }
                    },
                    NextTask = {
                      {
                        Condition = {
                          SBBTDecorator_SbTimeLimit_10 = {
                            LimitTime = 1.8,
                            TimerName = "RushWaitTimer1"
                          }
                        },
                        ObjectName = "SBBTTask_SbCautionToTarget'M_Raven_AI:SBBTTask_SbCautionToTarget_6'",
                        StartTask = {
                          SBBTTask_SbCautionToTarget_6 = {
                            MaxDistance = 1200,
                            SetMoveType = "ESBCautionToTargetMoveType::Side",
                            SideMoveMaxDistance = 2000,
                            SideMoveMinDistance = 1000,
                            WaitCheckTime = 4,
                            WaitCountByGroup = 1,
                            bIgnoreRestartSelf = true,
                            bLockOn = true
                          }
                        }
                      }
                    },
                    ObjectName = "BTComposite_Selector'M_Raven_AI:BTComposite_Selector_8'"
                  },
                  {
                    Condition = {
                      SBBTDecorator_SbBlackboard_5 = {
                        CompareOP = "GreaterOrEqual",
                        IntValue = 1,
                        KeyName = "FirstTime"
                      },
                      SBBTDecorator_SbCheckActorEffect_60 = {
                        ActorType = "Target",
                        OrCheck_EffectAliasArray = {
                          "M_Raven_NoGuardCheck",
                          "M_Raven_NoGuardCheck2",
                          "M_Raven_NoGuardShortCheck",
                          "M_Raven_EvadeParryCheck",
                          "M_Raven_ParryChain",
                          "M_Raven_GrabChain"
                        },
                        bActive = true,
                        bInverseCondition = true
                      },
                      SBBTDecorator_SbUseableTime_14 = {
                        KeyName = "Timer_20Seconds"
                      }
                    },
                    NextTask = {
                      {
                        Condition = {},
                        ObjectName = "SBBTTask_SbUseSkill'M_Raven_AI:SBBTTask_SbUseSkill_66'",
                        StartTask = {
                          SBBTTask_SbUseSkill_66 = {
                            "M_Raven_ParryPreview1",
                            bUsePostStep = true,
                            bUseSkillCommand = true
                          }
                        }
                      }
                    },
                    ObjectName = "BTComposite_Selector'M_Raven_AI:BTComposite_Selector_37'"
                  },
                  {
                    Condition = {
                      SBBTDecorator_SbCheckActorEffect_73 = {
                        ActorType = "Target",
                        EffectAlias = "M_Raven_ParryPreviewChain1",
                        bActive = true,
                        bInverseCondition = false
                      },
                      SBBTDecorator_SbCheckActorEffect_74 = {
                        ActorType = "Target",
                        EffectAlias = "M_Raven_ParryPreviewChain2",
                        bActive = true,
                        bInverseCondition = true
                      }
                    },
                    NextTask = {
                      {
                        Condition = {},
                        ObjectName = "SBBTTask_SbUseSkill'M_Raven_AI:SBBTTask_SbUseSkill_24'",
                        StartTask = {
                          SBBTTask_SbUseSkill_24 = {
                            "M_Raven_Parry",
                            bUsePostStep = true,
                            bUseSkillCommand = true
                          }
                        }
                      }
                    },
                    ObjectName = "BTComposite_Selector'M_Raven_AI:BTComposite_Selector_14'"
                  },
                  {
                    Condition = {
                      SBBTDecorator_SbCheckActorEffect_61 = {
                        ActorType = "Target",
                        EffectAlias = "M_Raven_ParryChain",
                        bActive = true,
                        bInverseCondition = false
                      },
                      SBBTDecorator_SbCheckActorEffect_62 = {
                        ActorType = "Target",
                        EffectAlias = "M_Raven_ParryPreviewChain2",
                        bActive = true,
                        bInverseCondition = true
                      }
                    },
                    NextTask = {
                      {
                        Condition = {
                          SBBTDecorator_SbCheckActorEffect_65 = {
                            ActorType = "Target",
                            EffectAlias = "M_Raven_BetaGrabCheck",
                            bActive = true,
                            bInverseCondition = true
                          }
                        },
                        NextTask = {
                          {
                            Condition = {},
                            NextTask = {
                              {
                                Condition = {},
                                ObjectName = "SBBTTask_SbUseSkill'M_Raven_AI:SBBTTask_SbUseSkill_43'",
                                StartTask = {
                                  SBBTTask_SbUseSkill_43 = {
                                    "M_Raven_BetaGrabChain",
                                    bUseSkillCommand = true
                                  }
                                }
                              },
                              {
                                Condition = {
                                  SBBTDecorator_SbCheckActorEffect_15 = {
                                    ActorType = "Target",
                                    EffectAlias = "M_Raven_GrabChain",
                                    bActive = true,
                                    bInverseCondition = false
                                  }
                                },
                                ObjectName = "SBBTTask_SbUseSkill'M_Raven_AI:SBBTTask_SbUseSkill_35'",
                                StartTask = {
                                  SBBTTask_SbUseSkill_35 = {
                                    "M_Raven_BetaCounterGrab",
                                    bUseSkillCommand = true
                                  }
                                }
                              }
                            },
                            ObjectName = "BTComposite_Sequence'M_Raven_AI:BTComposite_Sequence_7'"
                          },
                          {
                            Condition = {
                              SBBTDecorator_SbCheckActorEffect_64 = {
                                ActorType = "Target",
                                OrCheck_EffectAliasArray = {
                                  "M_Raven_GrabChain",
                                  "M_Raven_NoGuardCheck2"
                                },
                                bActive = true,
                                bInverseCondition = true
                              }
                            },
                            ObjectName = "SBBTTask_SbUseSkill'M_Raven_AI:SBBTTask_SbUseSkill_36'",
                            StartTask = {
                              SBBTTask_SbUseSkill_36 = {
                                "M_Raven_BetaGrab",
                                bUseSkillCommand = true
                              }
                            }
                          }
                        },
                        ObjectName = "BTComposite_Selector'M_Raven_AI:BTComposite_Selector_31'"
                      },
                      {
                        Condition = {
                          SBBTDecorator_SbCheckActorEffect_63 = {
                            ActorType = "Target",
                            OrCheck_EffectAliasArray = {
                              "M_Raven_GrabChain",
                              "M_Raven_NoGuardCheck2"
                            },
                            bActive = true,
                            bInverseCondition = true
                          }
                        },
                        ObjectName = "SBBTTask_SbUseSkill'M_Raven_AI:SBBTTask_SbUseSkill_54'",
                        StartTask = {
                          SBBTTask_SbUseSkill_54 = {
                            "M_Raven_BetaRapidCombo",
                            "M_Raven_BetaChargeCombo",
                            bUseSkillCommand = true
                          }
                        }
                      }
                    },
                    ObjectName = "BTComposite_Selector'M_Raven_AI:BTComposite_Selector_33'"
                  },
                  {
                    Condition = {
                      SBBTDecorator_SbCheckActorEffect_39 = {
                        ActorType = "Target",
                        OrCheck_EffectAliasArray = {
                          "M_Raven_EvadeParryCheck",
                          "M_Raven_ParryChain",
                          "M_Raven_GrabChain",
                          "M_Raven_ParryPreviewChain1",
                          "M_Raven_ParryPreviewChain2"
                        },
                        bActive = true,
                        bInverseCondition = true
                      },
                      SBBTDecorator_SbUseableTime_9 = {
                        KeyName = "Timer_20Seconds"
                      }
                    },
                    NextTask = {
                      {
                        Condition = {},
                        ObjectName = "SBBTTask_SbUseSkill'M_Raven_AI:SBBTTask_SbUseSkill_64'",
                        StartTask = {
                          SBBTTask_SbUseSkill_64 = {
                            "M_Raven_EvadeBackRush",
                            "M_Raven_ParryPreview2",
                            bUsePostStep = true,
                            bUseSkillCommand = true
                          }
                        }
                      }
                    },
                    ObjectName = "BTComposite_Selector'M_Raven_AI:BTComposite_Selector_42'"
                  },
                  {
                    Condition = {
                      SBBTDecorator_SbCheckActorEffect_76 = {
                        ActorType = "Target",
                        EffectAlias = "M_Raven_ParryPreviewChain2",
                        bActive = true,
                        bInverseCondition = false
                      },
                      SBBTDecorator_SbCheckActorEffect_77 = {
                        ActorType = "Target",
                        EffectAlias = "M_Raven_ParryPreviewChain1",
                        bActive = true,
                        bInverseCondition = true
                      }
                    },
                    NextTask = {
                      {
                        Condition = {},
                        ObjectName = "SBBTTask_SbUseSkill'M_Raven_AI:SBBTTask_SbUseSkill_25'",
                        StartTask = {
                          SBBTTask_SbUseSkill_25 = {
                            "M_Raven_ParryCounterCombo",
                            bUsePostStep = true,
                            bUseSkillCommand = true
                          }
                        }
                      }
                    },
                    ObjectName = "BTComposite_Selector'M_Raven_AI:BTComposite_Selector_17'"
                  },
                  {
                    Condition = {
                      SBBTDecorator_SbCheckActorEffect_25 = {
                        ActorType = "Target",
                        OrCheck_EffectAliasArray = {
                          "M_Raven_ParryChain",
                          "M_Raven_GrabChain",
                          "M_Raven_ParryPreviewChain1",
                          "M_Raven_ParryPreviewChain2",
                          "M_Raven_RushWaitTime"
                        },
                        bActive = true,
                        bInverseCondition = true
                      },
                      SBBTDecorator_SbDistanceToTarget_15 = {
                        CompareOP = "GreaterOrEqual",
                        Distance = 400
                      },
                      SBBTDecorator_SbUseableTime_3 = {
                        KeyName = "Timer_Approach"
                      }
                    },
                    NextTask = {
                      {
                        Condition = {
                          SBBTDecorator_SbCheckActorEffect_38 = {
                            ActorType = "Target",
                            OrCheck_EffectAliasArray = {
                              "M_Raven_NoGuardCheck",
                              "M_Raven_NoGuardShortCheck"
                            },
                            bActive = true,
                            bInverseCondition = true
                          },
                          SBBTDecorator_SbUseableTime_8 = {
                            KeyName = "Timer_NoGuard"
                          }
                        },
                        ObjectName = "SBBTTask_SbUseSkill'M_Raven_AI:SBBTTask_SbUseSkill_56'",
                        StartTask = {
                          SBBTTask_SbUseSkill_56 = {
                            "M_Raven_ChaseGrab",
                            bUseSkillCommand = true
                          }
                        }
                      },
                      {
                        Condition = {},
                        ObjectName = "SBBTTask_SbUseSkill'M_Raven_AI:SBBTTask_SbUseSkill_62'",
                        StartTask = {
                          SBBTTask_SbUseSkill_62 = {
                            "M_Raven_ChaseCombo",
                            bUseSkillCommand = true
                          }
                        }
                      }
                    },
                    ObjectName = "BTComposite_Selector'M_Raven_AI:BTComposite_Selector_40'"
                  },
                  {
                    Condition = {
                      SBBTDecorator_SbBlackboard_9 = {
                        CompareOP = "Equal",
                        KeyName = "FirstTime"
                      },
                      SBBTDecorator_SbCheckActorEffect_13 = {
                        ActorType = "Target",
                        OrCheck_EffectAliasArray = {
                          "M_Raven_EvadeParryCheck",
                          "M_Raven_ParryChain",
                          "M_Raven_GrabChain",
                          "M_Raven_ParryPreviewChain1",
                          "M_Raven_ParryPreviewChain2"
                        },
                        bActive = true,
                        bInverseCondition = true
                      },
                      SBBTDecorator_SbUseableTime_11 = {
                        KeyName = "Timer_NoGuard"
                      }
                    },
                    NextTask = {
                      {
                        Condition = {},
                        ObjectName = "SBBTTask_SbUseSkill'M_Raven_AI:SBBTTask_SbUseSkill_58'",
                        StartTask = {
                          SBBTTask_SbUseSkill_58 = {
                            "M_Raven_BetaRapidCombo",
                            "M_Raven_BetaChargeCombo",
                            "M_Raven_BetaGrab",
                            bUseSkillCommand = true
                          }
                        }
                      },
                      {
                        Condition = {},
                        ObjectName = "SBBTTask_SbBlackboard'M_Raven_AI:SBBTTask_SbBlackboard_3'",
                        StartTask = {
                          SBBTTask_SbBlackboard_3 = {
                            IntValue = 1,
                            KeyName = "FirstTime",
                            bReturnSucceeded = true
                          }
                        }
                      }
                    },
                    ObjectName = "BTComposite_Sequence'M_Raven_AI:BTComposite_Sequence_19'"
                  },
                  {
                    Condition = {
                      SBBTDecorator_SbBlackboard_3 = {
                        CompareOP = "GreaterOrEqual",
                        IntValue = 1,
                        KeyName = "FirstTime"
                      },
                      SBBTDecorator_SbCheckActorEffect_7 = {
                        ActorType = "Target",
                        OrCheck_EffectAliasArray = {
                          "M_Raven_NoGuardCheck",
                          "M_Raven_NoGuardShortCheck",
                          "M_Raven_EvadeParryCheck",
                          "M_Raven_ParryChain",
                          "M_Raven_ParryPreviewChain1",
                          "M_Raven_ParryPreviewChain2"
                        },
                        bActive = true,
                        bInverseCondition = true
                      },
                      SBBTDecorator_SbUseableTime_0 = {
                        KeyName = "Timer_NoGuard"
                      }
                    },
                    NextTask = {
                      {
                        Condition = {
                          SBBTDecorator_SbCheckActorEffect_40 = {
                            ActorType = "Target",
                            EffectAlias = "M_Raven_BetaGrabCheck",
                            bActive = true,
                            bInverseCondition = true
                          }
                        },
                        NextTask = {
                          {
                            Condition = {},
                            NextTask = {
                              {
                                Condition = {},
                                ObjectName = "SBBTTask_SbUseSkill'M_Raven_AI:SBBTTask_SbUseSkill_65'",
                                StartTask = {
                                  SBBTTask_SbUseSkill_65 = {
                                    "M_Raven_BetaGrabChain",
                                    bUseSkillCommand = true
                                  }
                                }
                              },
                              {
                                Condition = {
                                  SBBTDecorator_SbCheckActorEffect_42 = {
                                    ActorType = "Target",
                                    EffectAlias = "M_Raven_GrabChain",
                                    bActive = true,
                                    bInverseCondition = false
                                  }
                                },
                                ObjectName = "SBBTTask_SbUseSkill'M_Raven_AI:SBBTTask_SbUseSkill_55'",
                                StartTask = {
                                  SBBTTask_SbUseSkill_55 = {
                                    "M_Raven_BetaCounterGrab",
                                    bUseSkillCommand = true
                                  }
                                }
                              }
                            },
                            ObjectName = "BTComposite_Sequence'M_Raven_AI:BTComposite_Sequence_8'"
                          },
                          {
                            Condition = {
                              SBBTDecorator_SbCheckActorEffect_36 = {
                                ActorType = "Target",
                                OrCheck_EffectAliasArray = {
                                  "M_Raven_GrabChain",
                                  "M_Raven_NoGuardCheck2"
                                },
                                bActive = true,
                                bInverseCondition = true
                              }
                            },
                            ObjectName = "SBBTTask_SbUseSkill'M_Raven_AI:SBBTTask_SbUseSkill_59'",
                            StartTask = {
                              SBBTTask_SbUseSkill_59 = {
                                "M_Raven_BetaGrab",
                                bUseSkillCommand = true
                              }
                            }
                          }
                        },
                        ObjectName = "BTComposite_Selector'M_Raven_AI:BTComposite_Selector_36'"
                      },
                      {
                        Condition = {
                          SBBTDecorator_SbCheckActorEffect_5 = {
                            ActorType = "Target",
                            OrCheck_EffectAliasArray = {
                              "M_Raven_GrabChain",
                              "M_Raven_NoGuardCheck2"
                            },
                            bActive = true,
                            bInverseCondition = true
                          }
                        },
                        ObjectName = "SBBTTask_SbUseSkill'M_Raven_AI:SBBTTask_SbUseSkill_67'",
                        StartTask = {
                          SBBTTask_SbUseSkill_67 = {
                            "M_Raven_BetaRapidCombo",
                            "M_Raven_BetaChargeCombo",
                            bUseSkillCommand = true
                          }
                        }
                      }
                    },
                    ObjectName = "BTComposite_Selector'M_Raven_AI:BTComposite_Selector_43'"
                  },
                  {
                    Condition = {
                      SBBTDecorator_SbCheckActorEffect_47 = {
                        ActorType = "Target",
                        OrCheck_EffectAliasArray = {
                          "M_Raven_ParryChain",
                          "M_Raven_GrabChain",
                          "M_Raven_ParryPreviewChain1",
                          "M_Raven_ParryPreviewChain2"
                        },
                        bActive = true,
                        bInverseCondition = true
                      },
                      SBBTDecorator_SbUseableTime_10 = {
                        KeyName = "Timer_MoveBack"
                      }
                    },
                    NextTask = {
                      {
                        Condition = {},
                        ObjectName = "SBBTTask_SbUseSkill'M_Raven_AI:SBBTTask_SbUseSkill_60'",
                        StartTask = {
                          SBBTTask_SbUseSkill_60 = {
                            "M_Raven_RapidMoveBack",
                            bUseSkillCommand = true
                          }
                        }
                      },
                      {
                        Condition = {
                          SBBTDecorator_SbCheckActorEffect_14 = {
                            ActorType = "Target",
                            FlowAbortMode = "Self",
                            OrCheck_EffectAliasArray = {
                              "P_Eve_Beta_SwordAura",
                              "P_Eve_Beta_SwordAura2"
                            },
                            bActive = true,
                            bInverseCondition = true
                          },
                          SBBTDecorator_SbCheckActorEffect_16 = {
                            ActorType = "Target",
                            FlowAbortMode = "Self",
                            OrCheck_EffectAliasArray = {
                              "M_Raven_ParryPreviewChain1",
                              "M_Raven_ParryPreviewChain2",
                              "M_Raven_RushWaitTime",
                              "M_Raven_ParryChain"
                            },
                            bActive = true,
                            bInverseCondition = true
                          },
                          SBBTDecorator_SbDistanceToTarget_20 = {
                            CompareOP = "LessOrEqual",
                            Distance = 1400
                          },
                          SBBTDecorator_SbDistanceToTarget_21 = {
                            CompareOP = "GreaterOrEqual",
                            Distance = 250,
                            FlowAbortMode = "Self"
                          },
                          SBBTDecorator_SbTimeLimit_7 = {
                            LimitTime = 1.8,
                            ReactInterval = 35,
                            TimerName = "CautionTimer1"
                          }
                        },
                        ObjectName = "SBBTTask_SbCautionToTarget'M_Raven_AI:SBBTTask_SbCautionToTarget_5'",
                        StartTask = {
                          SBBTTask_SbCautionToTarget_5 = {
                            MaxDistance = 1200,
                            SetMoveType = "ESBCautionToTargetMoveType::Side",
                            SideMoveMaxDistance = 1000,
                            SideMoveMinDistance = 600,
                            WaitCheckTime = 4,
                            WaitCountByGroup = 1,
                            bIgnoreRestartSelf = true,
                            bLockOn = true
                          }
                        }
                      }
                    },
                    ObjectName = "BTComposite_Sequence'M_Raven_AI:BTComposite_Sequence_5'"
                  },
                  {
                    Condition = {
                      SBBTDecorator_SbCheckActorEffect_24 = {
                        ActorType = "Target",
                        OrCheck_EffectAliasArray = {
                          "M_Raven_ParryChain",
                          "M_Raven_GrabChain",
                          "M_Raven_ParryPreviewChain1",
                          "M_Raven_ParryPreviewChain2",
                          "M_Raven_MoveComboCheck"
                        },
                        bActive = true,
                        bInverseCondition = true
                      },
                      SBBTDecorator_SbUseableTime_2 = {
                        KeyName = "Timer_8Seconds"
                      }
                    },
                    NextTask = {
                      {
                        Condition = {},
                        ObjectName = "SBBTTask_SbUseSkill'M_Raven_AI:SBBTTask_SbUseSkill_63'",
                        StartTask = {
                          SBBTTask_SbUseSkill_63 = {
                            "M_Raven_MoveCombo",
                            "M_Raven_MoveChainCombo",
                            bUseSkillCommand = true
                          }
                        }
                      }
                    },
                    ObjectName = "BTComposite_Selector'M_Raven_AI:BTComposite_Selector_41'"
                  },
                  {
                    Condition = {
                      SBBTDecorator_SbCheckActorEffect_4 = {
                        ActorType = "Target",
                        OrCheck_EffectAliasArray = {
                          "M_Raven_ParryChain",
                          "M_Raven_GrabChain",
                          "M_Raven_ParryPreviewChain1",
                          "M_Raven_ParryPreviewChain2"
                        },
                        bActive = true,
                        bInverseCondition = true
                      }
                    },
                    NextTask = {
                      {
                        Condition = {},
                        ObjectName = "SBBTTask_SbUseSkill'M_Raven_AI:SBBTTask_SbUseSkill_68'",
                        StartTask = {
                          SBBTTask_SbUseSkill_68 = {
                            "M_Raven_Slash",
                            "M_Raven_SlashChain",
                            bUseSkillCommand = true
                          }
                        }
                      }
                    },
                    ObjectName = "BTComposite_Sequence'M_Raven_AI:BTComposite_Sequence_20'"
                  },
                  {
                    Condition = {},
                    NextTask = {
                      {
                        Condition = {
                          SBBTDecorator_SbCheckActorEffect_20 = {
                            ActorType = "Target",
                            FlowAbortMode = "Self",
                            OrCheck_EffectAliasArray = {
                              "P_Eve_Beta_SwordAura",
                              "P_Eve_Beta_SwordAura2"
                            },
                            bActive = true,
                            bInverseCondition = true
                          },
                          SBBTDecorator_SbCheckActorEffect_28 = {
                            ActorType = "Target",
                            FlowAbortMode = "Self",
                            OrCheck_EffectAliasArray = {
                              "M_Raven_ParryPreviewChain1",
                              "M_Raven_ParryPreviewChain2",
                              "M_Raven_RushWaitTime",
                              "M_Raven_ParryChain"
                            },
                            bActive = true,
                            bInverseCondition = true
                          },
                          SBBTDecorator_SbDistanceToTarget_14 = {
                            CompareOP = "LessOrEqual",
                            Distance = 1400
                          },
                          SBBTDecorator_SbDistanceToTarget_22 = {
                            CompareOP = "GreaterOrEqual",
                            Distance = 250,
                            FlowAbortMode = "Self"
                          },
                          SBBTDecorator_SbTimeLimit_4 = {
                            LimitTime = 1.8,
                            ReactInterval = 35,
                            TimerName = "CautionTimer1"
                          },
                          SBBTDecorator_SbUseableTime_4 = {
                            KeyName = "Timer_8Seconds"
                          }
                        },
                        ObjectName = "SBBTTask_SbCautionToTarget'M_Raven_AI:SBBTTask_SbCautionToTarget_3'",
                        StartTask = {
                          SBBTTask_SbCautionToTarget_3 = {
                            MaxDistance = 1200,
                            SetMoveType = "ESBCautionToTargetMoveType::Side",
                            SideMoveMaxDistance = 1000,
                            SideMoveMinDistance = 600,
                            WaitCheckTime = 4,
                            WaitCountByGroup = 1,
                            bIgnoreRestartSelf = true,
                            bLockOn = true
                          }
                        }
                      },
                      {
                        Condition = {},
                        ObjectName = "SBBTTask_SbMoveToTarget'M_Raven_AI:SBBTTask_SbMoveToTarget_2'",
                        StartTask = {
                          SBBTTask_SbMoveToTarget_2 = {
                            DistanceOfApproach = 250,
                            MoveState = "ESBMoveState::MoveState_Run",
                            NodeName = "SB_MoveToTarget_Run",
                            bBackgroundTask = true
                          }
                        }
                      }
                    },
                    ObjectName = "BTComposite_Selector'M_Raven_AI:BTComposite_Selector_44'"
                  }
                },
                ObjectName = "BTComposite_Selector'M_Raven_AI:BTComposite_Selector_6'"
              },
              {
                Condition = {
                  SBBTDecorator_SbCheckActorStat_1 = {
                    CheckStat = "ActorStatType_HP",
                    CheckValue = 60,
                    CompareOP = "LessOrEqual",
                    NodeName = "SB_CheckActorStat(HP<=60)",
                    bRateValue = true
                  },
                  SBBTDecorator_SbCheckStance_1 = {
                    StanceName = "M_Raven_Phase2"
                  }
                },
                NextTask = {
                  {
                    Condition = {
                      SBBTDecorator_SbBlackboard_0 = {
                        CompareOP = "Equal",
                        KeyName = "BB2"
                      }
                    },
                    NextTask = {
                      {
                        Condition = {},
                        ObjectName = "SBBTTask_SbUseableTimeReset'M_Raven_AI:SBBTTask_SbUseableTimeReset_9'",
                        StartTask = {
                          SBBTTask_SbUseableTimeReset_9 = {
                            KeyName = "Timer_7Seconds",
                            NodeName = "SB_UseableTimeReset(Timer_7Seconds)",
                            SetCycleTimeValue = -1,
                            SetInitialTimeValue = 7
                          }
                        }
                      },
                      {
                        Condition = {},
                        ObjectName = "SBBTTask_SbUseableTimeReset'M_Raven_AI:SBBTTask_SbUseableTimeReset_2'",
                        StartTask = {
                          SBBTTask_SbUseableTimeReset_2 = {
                            KeyName = "Timer_10Seconds",
                            NodeName = "SB_UseableTimeReset(Timer_10Seconds)",
                            SetCycleTimeValue = -1,
                            SetInitialTimeValue = 10
                          }
                        }
                      },
                      {
                        Condition = {},
                        ObjectName = "SBBTTask_SbUseableTimeReset'M_Raven_AI:SBBTTask_SbUseableTimeReset_8'",
                        StartTask = {
                          SBBTTask_SbUseableTimeReset_8 = {
                            KeyName = "Timer_15Seconds",
                            NodeName = "SB_UseableTimeReset(Timer_15Seconds)",
                            SetCycleTimeValue = -1,
                            SetInitialTimeValue = 15
                          }
                        }
                      },
                      {
                        Condition = {},
                        ObjectName = "SBBTTask_SbUseableTimeReset'M_Raven_AI:SBBTTask_SbUseableTimeReset_3'",
                        StartTask = {
                          SBBTTask_SbUseableTimeReset_3 = {
                            KeyName = "Timer_EvasionSkill",
                            NodeName = "SB_UseableTimeReset(Timer_EvasionSkill)",
                            SetCycleTimeValue = 1.5,
                            SetInitialTimeValue = 1
                          }
                        }
                      },
                      {
                        Condition = {},
                        ObjectName = "SBBTTask_SbBlackboard'M_Raven_AI:SBBTTask_SbBlackboard_1'",
                        StartTask = {
                          SBBTTask_SbBlackboard_1 = {
                            IntValue = 1,
                            KeyName = "BB2",
                            bReturnSucceeded = true
                          }
                        }
                      }
                    },
                    ObjectName = "BTComposite_Sequence'M_Raven_AI:BTComposite_Sequence_14'"
                  },
                  {
                    Condition = {
                      SBBTDecorator_SbAimMe_7 = {},
                      SBBTDecorator_SbBlackboard_14 = {
                        CompareOP = "Equal",
                        KeyName = "FirstShot"
                      }
                    },
                    NextTask = {
                      {
                        Condition = {},
                        ObjectName = "SBBTTask_SbBlackboard'M_Raven_AI:SBBTTask_SbBlackboard_4'",
                        StartTask = {
                          SBBTTask_SbBlackboard_4 = {
                            IntValue = 1,
                            KeyName = "FirstShot",
                            bReturnSucceeded = true
                          }
                        }
                      },
                      {
                        Condition = {
                          SBBTDecorator_SbRandom_8 = {
                            CheckValue = 50,
                            CompareOP = "LessOrEqual",
                            RandomRange = 100
                          }
                        },
                        ObjectName = "SBBTTask_SbUseSkill'M_Raven_AI:SBBTTask_SbUseSkill_20'",
                        StartTask = {
                          SBBTTask_SbUseSkill_20 = {
                            "M_Raven_EvadeLeft",
                            "M_Raven_EvadeRight",
                            SkillComboType = "ESBAISkillComboType::TableCommand",
                            bUseSkillCommand = true
                          }
                        }
                      }
                    },
                    ObjectName = "BTComposite_Sequence'M_Raven_AI:BTComposite_Sequence_12'"
                  },
                  {
                    Condition = {
                      SBBTDecorator_SbCheckActorEffect_30 = {
                        ActorType = "Target",
                        EffectAlias = "M_Common_HitProjectileResult",
                        bActive = true,
                        bInverseCondition = false
                      },
                      SBBTDecorator_SbRandom_0 = {
                        CheckValue = 50,
                        CompareOP = "LessOrEqual",
                        RandomRange = 100
                      }
                    },
                    NextTask = {
                      {
                        Condition = {},
                        ObjectName = "SBBTTask_SbUseSkill'M_Raven_AI:SBBTTask_SbUseSkill_18'",
                        StartTask = {
                          SBBTTask_SbUseSkill_18 = {
                            "M_Raven_EvadeLeft",
                            "M_Raven_EvadeRight",
                            SkillComboType = "ESBAISkillComboType::TableCommand",
                            bUseSkillCommand = true
                          }
                        }
                      }
                    },
                    ObjectName = "BTComposite_Sequence'M_Raven_AI:BTComposite_Sequence_11'"
                  },
                  {
                    Condition = {
                      SBBTDecorator_SbAimMe_6 = {},
                      SBBTDecorator_SbCheckActorStat_6 = {
                        CheckStat = "ActorStatType_HP",
                        CheckValue = 20,
                        CompareOP = "LessOrEqual",
                        bRateValue = true
                      },
                      SBBTDecorator_SbRandom_7 = {
                        CheckValue = 50,
                        CompareOP = "LessOrEqual",
                        RandomRange = 100
                      }
                    },
                    NextTask = {
                      {
                        Condition = {},
                        ObjectName = "SBBTTask_SbUseSkill'M_Raven_AI:SBBTTask_SbUseSkill_19'",
                        StartTask = {
                          SBBTTask_SbUseSkill_19 = {
                            "M_Raven_EvadeLeft",
                            "M_Raven_EvadeRight",
                            SkillComboType = "ESBAISkillComboType::TableCommand",
                            bUseSkillCommand = true
                          }
                        }
                      }
                    },
                    ObjectName = "BTComposite_Sequence'M_Raven_AI:BTComposite_Sequence_10'"
                  },
                  {
                    Condition = {
                      SBBTDecorator_SbCheckActorEffect_79 = {
                        ActorType = "Target",
                        EffectAlias = "P_Eve_Beta_SwordAura",
                        bActive = true,
                        bInverseCondition = false
                      },
                      SBBTDecorator_SbDistanceToTarget_10 = {
                        CompareOP = "GreaterOrEqual",
                        Distance = 300
                      }
                    },
                    NextTask = {
                      {
                        Condition = {},
                        ObjectName = "SBBTTask_SbUseSkill'M_Raven_AI:SBBTTask_SbUseSkill_2'",
                        StartTask = {
                          SBBTTask_SbUseSkill_2 = {
                            "M_Raven_BetaEvadeLeft",
                            "M_Raven_BetaEvadeRight",
                            SkillComboType = "ESBAISkillComboType::TableCommand",
                            bUseSkillCommand = true
                          }
                        }
                      }
                    },
                    ObjectName = "BTComposite_Sequence'M_Raven_AI:BTComposite_Sequence_6'"
                  },
                  {
                    Condition = {
                      SBBTDecorator_SbCheckActorEffect_80 = {
                        ActorType = "Target",
                        EffectAlias = "P_Eve_Beta_SwordAura2",
                        bActive = true,
                        bInverseCondition = false
                      },
                      SBBTDecorator_SbDistanceToTarget_18 = {
                        CompareOP = "GreaterOrEqual",
                        Distance = 300
                      }
                    },
                    NextTask = {
                      {
                        Condition = {},
                        ObjectName = "SBBTTask_SbUseSkill'M_Raven_AI:SBBTTask_SbUseSkill_8'",
                        StartTask = {
                          SBBTTask_SbUseSkill_8 = {
                            "M_Raven_BetaEvadeLeft",
                            "M_Raven_BetaEvadeRight",
                            SkillComboType = "ESBAISkillComboType::TableCommand",
                            bUseSkillCommand = true
                          }
                        }
                      }
                    },
                    ObjectName = "BTComposite_Sequence'M_Raven_AI:BTComposite_Sequence_9'"
                  },
                  {
                    Condition = {
                      SBBTDecorator_SbCheckActorEffect_43 = {
                        ActorType = "Target",
                        EffectAlias = "M_Raven_RushWaitTime",
                        FlowAbortMode = "Self",
                        bActive = true,
                        bInverseCondition = false
                      },
                      SBBTDecorator_SbCheckActorEffect_44 = {
                        ActorType = "Target",
                        EffectAlias = "P_Eve_Beta_SwordAura2",
                        FlowAbortMode = "Self",
                        bActive = true,
                        bInverseCondition = true
                      }
                    },
                    NextTask = {
                      {
                        Condition = {
                          SBBTDecorator_SbTimeLimit_8 = {
                            LimitTime = 1.8,
                            TimerName = "RushWaitTimer1"
                          }
                        },
                        ObjectName = "SBBTTask_SbCautionToTarget'M_Raven_AI:SBBTTask_SbCautionToTarget_7'",
                        StartTask = {
                          SBBTTask_SbCautionToTarget_7 = {
                            MaxDistance = 1200,
                            SetMoveType = "ESBCautionToTargetMoveType::Side",
                            SideMoveMaxDistance = 2000,
                            SideMoveMinDistance = 1000,
                            WaitCheckTime = 4,
                            WaitCountByGroup = 1,
                            bIgnoreRestartSelf = true,
                            bLockOn = true
                          }
                        }
                      }
                    },
                    ObjectName = "BTComposite_Selector'M_Raven_AI:BTComposite_Selector_10'"
                  },
                  {
                    Condition = {
                      SBBTDecorator_SbBlackboard_8 = {
                        CompareOP = "GreaterOrEqual",
                        IntValue = 1,
                        KeyName = "SecondTime"
                      },
                      SBBTDecorator_SbCheckActorEffect_19 = {
                        ActorType = "Target",
                        OrCheck_EffectAliasArray = {
                          "M_Raven_EvadeParryCheck",
                          "M_Raven_GrabChain"
                        },
                        bActive = true,
                        bInverseCondition = true
                      }
                    },
                    NextTask = {
                      {
                        Condition = {},
                        ObjectName = "SBBTTask_SbUseSkill'M_Raven_AI:SBBTTask_SbUseSkill_37'",
                        StartTask = {
                          SBBTTask_SbUseSkill_37 = {
                            "M_Raven_ParryPreview1",
                            bUsePostStep = true,
                            bUseSkillCommand = true
                          }
                        }
                      }
                    },
                    ObjectName = "BTComposite_Selector'M_Raven_AI:BTComposite_Selector_1'"
                  },
                  {
                    Condition = {
                      SBBTDecorator_SbCheckActorEffect_67 = {
                        ActorType = "Target",
                        EffectAlias = "M_Raven_ParryPreviewChain1",
                        bActive = true,
                        bInverseCondition = false
                      },
                      SBBTDecorator_SbCheckActorEffect_68 = {
                        ActorType = "Target",
                        EffectAlias = "M_Raven_ParryPreviewChain2",
                        bActive = true,
                        bInverseCondition = true
                      }
                    },
                    NextTask = {
                      {
                        Condition = {},
                        ObjectName = "SBBTTask_SbUseSkill'M_Raven_AI:SBBTTask_SbUseSkill_34'",
                        StartTask = {
                          SBBTTask_SbUseSkill_34 = {
                            "M_Raven_ParryCounterSlash",
                            bUsePostStep = true,
                            bUseSkillCommand = true
                          }
                        }
                      }
                    },
                    ObjectName = "BTComposite_Selector'M_Raven_AI:BTComposite_Selector_26'"
                  },
                  {
                    Condition = {
                      SBBTDecorator_SbBlackboard_2 = {
                        CompareOP = "GreaterOrEqual",
                        IntValue = 1,
                        KeyName = "SecondTime"
                      },
                      SBBTDecorator_SbCheckActorEffect_81 = {
                        ActorType = "Target",
                        OrCheck_EffectAliasArray = {
                          "M_Raven_EvadeParryCheck",
                          "M_Raven_GrabChain",
                          "M_Raven_ParryPreviewChain1",
                          "M_Raven_ParryPreviewChain2"
                        },
                        bActive = true,
                        bInverseCondition = true
                      },
                      SBBTDecorator_SbUseableTime_1 = {
                        KeyName = "Timer_10Seconds"
                      }
                    },
                    NextTask = {
                      {
                        Condition = {},
                        ObjectName = "SBBTTask_SbUseSkill'M_Raven_AI:SBBTTask_SbUseSkill_91'",
                        StartTask = {
                          SBBTTask_SbUseSkill_91 = {
                            "M_Raven_EvadeBackSwordAura",
                            bUseSkillCommand = true
                          }
                        }
                      }
                    },
                    ObjectName = "BTComposite_Selector'M_Raven_AI:BTComposite_Selector_57'"
                  },
                  {
                    Condition = {
                      SBBTDecorator_SbCheckActorEffect_18 = {
                        ActorType = "Target",
                        OrCheck_EffectAliasArray = {
                          "M_Raven_EvadeParryCheck",
                          "M_Raven_GrabChain",
                          "M_Raven_ParryPreviewChain1",
                          "M_Raven_ParryPreviewChain2"
                        },
                        bActive = true,
                        bInverseCondition = true
                      },
                      SBBTDecorator_SbUseableTime_16 = {
                        KeyName = "Timer_10Seconds"
                      }
                    },
                    NextTask = {
                      {
                        Condition = {},
                        ObjectName = "SBBTTask_SbUseSkill'M_Raven_AI:SBBTTask_SbUseSkill_39'",
                        StartTask = {
                          SBBTTask_SbUseSkill_39 = {
                            "M_Raven_EvadeBackRush",
                            "M_Raven_ParryPreview2",
                            bUsePostStep = true,
                            bUseSkillCommand = true
                          }
                        }
                      }
                    },
                    ObjectName = "BTComposite_Selector'M_Raven_AI:BTComposite_Selector_5'"
                  },
                  {
                    Condition = {
                      SBBTDecorator_SbCheckActorEffect_69 = {
                        ActorType = "Target",
                        EffectAlias = "M_Raven_ParryPreviewChain2",
                        bActive = true,
                        bInverseCondition = false
                      },
                      SBBTDecorator_SbCheckActorEffect_70 = {
                        ActorType = "Target",
                        EffectAlias = "M_Raven_ParryPreviewChain1",
                        bActive = true,
                        bInverseCondition = true
                      }
                    },
                    NextTask = {
                      {
                        Condition = {},
                        ObjectName = "SBBTTask_SbUseSkill'M_Raven_AI:SBBTTask_SbUseSkill_38'",
                        StartTask = {
                          SBBTTask_SbUseSkill_38 = {
                            "M_Raven_ParryCounterCombo",
                            bUsePostStep = true,
                            bUseSkillCommand = true
                          }
                        }
                      }
                    },
                    ObjectName = "BTComposite_Selector'M_Raven_AI:BTComposite_Selector_27'"
                  },
                  {
                    Condition = {
                      SBBTDecorator_SbCheckActorEffect_129 = {
                        ActorType = "Target",
                        OrCheck_EffectAliasArray = {
                          "M_Raven_GrabChain",
                          "M_Raven_ParryPreviewChain1",
                          "M_Raven_ParryPreviewChain2"
                        },
                        bActive = true,
                        bInverseCondition = true
                      },
                      SBBTDecorator_SbCheckActorStat_0 = {
                        CheckStat = "ActorStatType_HP",
                        CheckValue = 30,
                        CompareOP = "LessOrEqual",
                        NodeName = "SB_CheckActorStat(HP<=30)",
                        bRateValue = true
                      }
                    },
                    NextTask = {
                      {
                        Condition = {},
                        ObjectName = "SBBTTask_SbUseSkill'M_Raven_AI:SBBTTask_SbUseSkill_4'",
                        StartTask = {
                          SBBTTask_SbUseSkill_4 = {
                            "M_Raven_SlashChainCombo",
                            bUseSkillCommand = true
                          }
                        }
                      }
                    },
                    ObjectName = "BTComposite_Selector'M_Raven_AI:BTComposite_Selector_2'"
                  },
                  {
                    Condition = {
                      SBBTDecorator_SbCheckActorEffect_6 = {
                        ActorType = "Target",
                        OrCheck_EffectAliasArray = {
                          "M_Raven_GrabChain",
                          "M_Raven_ParryPreviewChain1",
                          "M_Raven_ParryPreviewChain2",
                          "M_Raven_RushWaitTime",
                          "M_Raven_SwordAuraCheck"
                        },
                        bActive = true,
                        bInverseCondition = true
                      },
                      SBBTDecorator_SbDistanceToTarget_13 = {
                        CompareOP = "GreaterOrEqual",
                        Distance = 1000
                      }
                    },
                    NextTask = {
                      {
                        Condition = {},
                        ObjectName = "SBBTTask_SbUseSkill'M_Raven_AI:SBBTTask_SbUseSkill_16'",
                        StartTask = {
                          SBBTTask_SbUseSkill_16 = {
                            "M_Raven_SwordAuraCombo",
                            bUseSkillCommand = true
                          }
                        }
                      }
                    },
                    ObjectName = "BTComposite_Selector'M_Raven_AI:BTComposite_Selector_12'"
                  },
                  {
                    Condition = {
                      SBBTDecorator_SbCheckActorEffect_2 = {
                        ActorType = "Target",
                        OrCheck_EffectAliasArray = {
                          "M_Raven_GrabChain",
                          "M_Raven_ChaseCheck",
                          "M_Raven_ParryPreviewChain1",
                          "M_Raven_ParryPreviewChain2",
                          "M_Raven_RushWaitTime"
                        },
                        bActive = true,
                        bInverseCondition = true
                      },
                      SBBTDecorator_SbDistanceToTarget_17 = {
                        CompareOP = "GreaterOrEqual",
                        Distance = 400
                      }
                    },
                    NextTask = {
                      {
                        Condition = {
                          SBBTDecorator_SbCheckActorEffect_17 = {
                            ActorType = "Target",
                            OrCheck_EffectAliasArray = {
                              "M_Raven_NoGuardCheck",
                              "M_Raven_NoGuardShortCheck"
                            },
                            bActive = true,
                            bInverseCondition = true
                          }
                        },
                        ObjectName = "SBBTTask_SbUseSkill'M_Raven_AI:SBBTTask_SbUseSkill_93'",
                        StartTask = {
                          SBBTTask_SbUseSkill_93 = {
                            "M_Raven_ChaseGrab",
                            bUseSkillCommand = true
                          }
                        }
                      },
                      {
                        Condition = {},
                        ObjectName = "SBBTTask_SbUseSkill'M_Raven_AI:SBBTTask_SbUseSkill_40'",
                        StartTask = {
                          SBBTTask_SbUseSkill_40 = {
                            "M_Raven_ChaseCombo",
                            bUseSkillCommand = true
                          }
                        }
                      }
                    },
                    ObjectName = "BTComposite_Selector'M_Raven_AI:BTComposite_Selector_13'"
                  },
                  {
                    Condition = {
                      SBBTDecorator_SbBlackboard_4 = {
                        CompareOP = "Equal",
                        KeyName = "SecondTime"
                      },
                      SBBTDecorator_SbCheckActorEffect_37 = {
                        ActorType = "Target",
                        OrCheck_EffectAliasArray = {
                          "M_Raven_GrabChain",
                          "M_Raven_ParryPreviewChain1",
                          "M_Raven_ParryPreviewChain2"
                        },
                        bActive = true,
                        bInverseCondition = true
                      },
                      SBBTDecorator_SbUseableTime_12 = {
                        KeyName = "Timer_7Seconds"
                      }
                    },
                    NextTask = {
                      {
                        Condition = {},
                        ObjectName = "SBBTTask_SbUseSkill'M_Raven_AI:SBBTTask_SbUseSkill_15'",
                        StartTask = {
                          SBBTTask_SbUseSkill_15 = {
                            "M_Raven_BurstAreaSlash",
                            bUseSkillCommand = true
                          }
                        }
                      },
                      {
                        Condition = {},
                        ObjectName = "SBBTTask_SbBlackboard'M_Raven_AI:SBBTTask_SbBlackboard_2'",
                        StartTask = {
                          SBBTTask_SbBlackboard_2 = {
                            IntValue = 1,
                            KeyName = "SecondTime",
                            bReturnSucceeded = true
                          }
                        }
                      }
                    },
                    ObjectName = "BTComposite_Sequence'M_Raven_AI:BTComposite_Sequence_16'"
                  },
                  {
                    Condition = {
                      SBBTDecorator_SbBlackboard_10 = {
                        CompareOP = "GreaterOrEqual",
                        IntValue = 1,
                        KeyName = "SecondTime"
                      },
                      SBBTDecorator_SbCheckActorEffect_11 = {
                        ActorType = "Target",
                        OrCheck_EffectAliasArray = {
                          "M_Raven_GrabChain",
                          "M_Raven_ParryPreviewChain1",
                          "M_Raven_ParryPreviewChain2"
                        },
                        bActive = true,
                        bInverseCondition = true
                      }
                    },
                    NextTask = {
                      {
                        Condition = {},
                        ObjectName = "SBBTTask_SbUseSkill'M_Raven_AI:SBBTTask_SbUseSkill_1'",
                        StartTask = {
                          SBBTTask_SbUseSkill_1 = {
                            "M_Raven_BurstSpinCombo",
                            "M_Raven_BurstAreaSlash",
                            bUseSkillCommand = true
                          }
                        }
                      }
                    },
                    ObjectName = "BTComposite_Sequence'M_Raven_AI:BTComposite_Sequence_2'"
                  },
                  {
                    Condition = {
                      SBBTDecorator_SbBlackboard_11 = {
                        CompareOP = "GreaterOrEqual",
                        IntValue = 1,
                        KeyName = "SecondTime"
                      },
                      SBBTDecorator_SbCheckActorEffect_23 = {
                        ActorType = "Target",
                        OrCheck_EffectAliasArray = {
                          "M_Raven_NoGuardCheck",
                          "M_Raven_EvadeParryCheck",
                          "M_Raven_NoGuardShortCheck",
                          "M_Raven_ParryPreviewChain1",
                          "M_Raven_ParryPreviewChain2"
                        },
                        bActive = true,
                        bInverseCondition = true
                      }
                    },
                    NextTask = {
                      {
                        Condition = {
                          SBBTDecorator_SbCheckActorEffect_33 = {
                            ActorType = "Target",
                            EffectAlias = "M_Raven_BetaGrabCheck",
                            bActive = true,
                            bInverseCondition = true
                          }
                        },
                        NextTask = {
                          {
                            Condition = {},
                            NextTask = {
                              {
                                Condition = {},
                                ObjectName = "SBBTTask_SbUseSkill'M_Raven_AI:SBBTTask_SbUseSkill_3'",
                                StartTask = {
                                  SBBTTask_SbUseSkill_3 = {
                                    "M_Raven_BetaGrabChain",
                                    bUseSkillCommand = true
                                  }
                                }
                              },
                              {
                                Condition = {
                                  SBBTDecorator_SbCheckActorEffect_34 = {
                                    ActorType = "Target",
                                    EffectAlias = "M_Raven_GrabChain",
                                    bActive = true,
                                    bInverseCondition = false
                                  }
                                },
                                ObjectName = "SBBTTask_SbUseSkill'M_Raven_AI:SBBTTask_SbUseSkill_10'",
                                StartTask = {
                                  SBBTTask_SbUseSkill_10 = {
                                    "M_Raven_BetaCounterGrab",
                                    bUseSkillCommand = true
                                  }
                                }
                              }
                            },
                            ObjectName = "BTComposite_Sequence'M_Raven_AI:BTComposite_Sequence_0'"
                          },
                          {
                            Condition = {
                              SBBTDecorator_SbCheckActorEffect_32 = {
                                ActorType = "Target",
                                OrCheck_EffectAliasArray = {
                                  "M_Raven_GrabChain",
                                  "M_Raven_NoGuardCheck2"
                                },
                                bActive = true,
                                bInverseCondition = true
                              }
                            },
                            ObjectName = "SBBTTask_SbUseSkill'M_Raven_AI:SBBTTask_SbUseSkill_21'",
                            StartTask = {
                              SBBTTask_SbUseSkill_21 = {
                                "M_Raven_BetaGrab",
                                bUseSkillCommand = true
                              }
                            }
                          }
                        },
                        ObjectName = "BTComposite_Selector'M_Raven_AI:BTComposite_Selector_7'"
                      },
                      {
                        Condition = {
                          SBBTDecorator_SbCheckActorEffect_31 = {
                            ActorType = "Target",
                            OrCheck_EffectAliasArray = {
                              "M_Raven_GrabChain",
                              "M_Raven_NoGuardCheck2"
                            },
                            bActive = true,
                            bInverseCondition = true
                          }
                        },
                        ObjectName = "SBBTTask_SbUseSkill'M_Raven_AI:SBBTTask_SbUseSkill_44'",
                        StartTask = {
                          SBBTTask_SbUseSkill_44 = {
                            "M_Raven_BetaRapidCombo",
                            "M_Raven_BetaChargeCombo",
                            bUseSkillCommand = true
                          }
                        }
                      }
                    },
                    ObjectName = "BTComposite_Selector'M_Raven_AI:BTComposite_Selector_3'"
                  },
                  {
                    Condition = {
                      SBBTDecorator_SbCheckActorEffect_10 = {
                        ActorType = "Target",
                        OrCheck_EffectAliasArray = {
                          "M_Raven_GrabChain",
                          "M_Raven_BackMoveCheck",
                          "M_Raven_ParryPreviewChain1",
                          "M_Raven_ParryPreviewChain2"
                        },
                        bActive = true,
                        bInverseCondition = true
                      }
                    },
                    NextTask = {
                      {
                        Condition = {},
                        NextTask = {
                          {
                            Condition = {
                              SBBTDecorator_SbCheckActorEffect_9 = {
                                ActorType = "Target",
                                EffectAlias = "M_Raven_SwordAuraCheck",
                                bActive = true,
                                bInverseCondition = true
                              },
                              SBBTDecorator_SbUseableTime_48 = {
                                KeyName = "Timer_15Seconds"
                              }
                            },
                            ObjectName = "SBBTTask_SbUseSkill'M_Raven_AI:SBBTTask_SbUseSkill_17'",
                            StartTask = {
                              SBBTTask_SbUseSkill_17 = {
                                "M_Raven_BackJumpCombo",
                                bUseSkillCommand = true
                              }
                            }
                          },
                          {
                            Condition = {
                              SBBTDecorator_SbCheckActorEffect_26 = {
                                ActorType = "Target",
                                FlowAbortMode = "Self",
                                OrCheck_EffectAliasArray = {
                                  "P_Eve_Beta_SwordAura",
                                  "P_Eve_Beta_SwordAura2"
                                },
                                bActive = true,
                                bInverseCondition = true
                              },
                              SBBTDecorator_SbDistanceToTarget_2 = {
                                CompareOP = "LessOrEqual",
                                Distance = 1400
                              },
                              SBBTDecorator_SbDistanceToTarget_3 = {
                                CompareOP = "GreaterOrEqual",
                                Distance = 250,
                                FlowAbortMode = "Self"
                              },
                              SBBTDecorator_SbTimeLimit_3 = {
                                LimitTime = 1.8,
                                ReactInterval = 55,
                                TimerName = "CautionTimer2"
                              }
                            },
                            ObjectName = "SBBTTask_SbCautionToTarget'M_Raven_AI:SBBTTask_SbCautionToTarget_1'",
                            StartTask = {
                              SBBTTask_SbCautionToTarget_1 = {
                                MaxDistance = 1200,
                                SetMoveType = "ESBCautionToTargetMoveType::Side",
                                SideMoveMaxDistance = 1000,
                                SideMoveMinDistance = 600,
                                WaitCheckTime = 4,
                                WaitCountByGroup = 1,
                                bIgnoreRestartSelf = true,
                                bLockOn = true
                              }
                            }
                          }
                        },
                        ObjectName = "BTComposite_Sequence'M_Raven_AI:BTComposite_Sequence_3'"
                      },
                      {
                        Condition = {},
                        NextTask = {
                          {
                            Condition = {},
                            ObjectName = "SBBTTask_SbUseSkill'M_Raven_AI:SBBTTask_SbUseSkill_94'",
                            StartTask = {
                              SBBTTask_SbUseSkill_94 = {
                                "M_Raven_RapidMoveBack",
                                bUseSkillCommand = true
                              }
                            }
                          },
                          {
                            Condition = {
                              SBBTDecorator_SbCheckActorEffect_27 = {
                                ActorType = "Target",
                                FlowAbortMode = "Self",
                                OrCheck_EffectAliasArray = {
                                  "P_Eve_Beta_SwordAura",
                                  "P_Eve_Beta_SwordAura2"
                                },
                                bActive = true,
                                bInverseCondition = true
                              },
                              SBBTDecorator_SbDistanceToTarget_4 = {
                                CompareOP = "LessOrEqual",
                                Distance = 1400
                              },
                              SBBTDecorator_SbDistanceToTarget_5 = {
                                CompareOP = "GreaterOrEqual",
                                Distance = 250,
                                FlowAbortMode = "Self"
                              },
                              SBBTDecorator_SbTimeLimit_5 = {
                                LimitTime = 1.8,
                                ReactInterval = 55,
                                TimerName = "CautionTimer2"
                              }
                            },
                            ObjectName = "SBBTTask_SbCautionToTarget'M_Raven_AI:SBBTTask_SbCautionToTarget_0'",
                            StartTask = {
                              SBBTTask_SbCautionToTarget_0 = {
                                MaxDistance = 1200,
                                SetMoveType = "ESBCautionToTargetMoveType::Side",
                                SideMoveMaxDistance = 1000,
                                SideMoveMinDistance = 600,
                                WaitCheckTime = 4,
                                WaitCountByGroup = 1,
                                bIgnoreRestartSelf = true,
                                bLockOn = true
                              }
                            }
                          }
                        },
                        ObjectName = "BTComposite_Sequence'M_Raven_AI:BTComposite_Sequence_4'"
                      }
                    },
                    ObjectName = "BTComposite_Selector'M_Raven_AI:BTComposite_Selector_4'"
                  },
                  {
                    Condition = {
                      SBBTDecorator_SbCheckActorEffect_12 = {
                        ActorType = "Target",
                        OrCheck_EffectAliasArray = {
                          "M_Raven_GrabChain",
                          "M_Raven_ParryPreviewChain1",
                          "M_Raven_ParryPreviewChain2"
                        },
                        bActive = true,
                        bInverseCondition = true
                      }
                    },
                    NextTask = {
                      {
                        Condition = {
                          SBBTDecorator_SbCheckActorEffect_0 = {
                            ActorType = "Target",
                            EffectAlias = "M_Raven_ComboCheck",
                            bActive = true,
                            bInverseCondition = true
                          }
                        },
                        ObjectName = "SBBTTask_SbUseSkill'M_Raven_AI:SBBTTask_SbUseSkill_13'",
                        StartTask = {
                          SBBTTask_SbUseSkill_13 = {
                            "M_Raven_SlashCombo",
                            bUseSkillCommand = true
                          }
                        }
                      },
                      {
                        Condition = {},
                        ObjectName = "SBBTTask_SbUseSkill'M_Raven_AI:SBBTTask_SbUseSkill_41'",
                        StartTask = {
                          SBBTTask_SbUseSkill_41 = {
                            "M_Raven_BurstSpinCombo",
                            bUseSkillCommand = true
                          }
                        }
                      },
                      {
                        Condition = {
                          SBBTDecorator_SbCheckActorEffect_3 = {
                            ActorType = "Target",
                            EffectAlias = "M_Raven_MoveComboCheck",
                            bActive = true,
                            bInverseCondition = true
                          }
                        },
                        ObjectName = "SBBTTask_SbUseSkill'M_Raven_AI:SBBTTask_SbUseSkill_9'",
                        StartTask = {
                          SBBTTask_SbUseSkill_9 = {
                            "M_Raven_MoveCombo",
                            "M_Raven_MoveChainCombo",
                            bUseSkillCommand = true
                          }
                        }
                      }
                    },
                    ObjectName = "BTComposite_Selector'M_Raven_AI:BTComposite_Selector_11'"
                  },
                  {
                    Condition = {
                      SBBTDecorator_SbCheckActorEffect_22 = {
                        ActorType = "Target",
                        OrCheck_EffectAliasArray = {
                          "M_Raven_GrabChain",
                          "M_Raven_ParryPreviewChain1",
                          "M_Raven_ParryPreviewChain2"
                        },
                        bActive = true,
                        bInverseCondition = true
                      }
                    },
                    NextTask = {
                      {
                        Condition = {},
                        ObjectName = "SBBTTask_SbUseSkill'M_Raven_AI:SBBTTask_SbUseSkill_57'",
                        StartTask = {
                          SBBTTask_SbUseSkill_57 = {
                            "M_Raven_Slash",
                            "M_Raven_SlashChain",
                            bUseSkillCommand = true
                          }
                        }
                      }
                    },
                    ObjectName = "BTComposite_Sequence'M_Raven_AI:BTComposite_Sequence_36'"
                  },
                  {
                    Condition = {},
                    NextTask = {
                      {
                        Condition = {
                          SBBTDecorator_SbCheckActorEffect_52 = {
                            ActorType = "Target",
                            EffectAlias = "P_Eve_Beta_SwordAura",
                            FlowAbortMode = "Self",
                            bActive = true,
                            bInverseCondition = true
                          },
                          SBBTDecorator_SbCheckActorEffect_78 = {
                            ActorType = "Target",
                            FlowAbortMode = "Self",
                            OrCheck_EffectAliasArray = {
                              "M_Raven_ParryPreviewChain1",
                              "M_Raven_ParryPreviewChain2"
                            },
                            bActive = true,
                            bInverseCondition = true
                          },
                          SBBTDecorator_SbDistanceToTarget_0 = {
                            CompareOP = "LessOrEqual",
                            Distance = 1400
                          },
                          SBBTDecorator_SbDistanceToTarget_1 = {
                            CompareOP = "GreaterOrEqual",
                            Distance = 250,
                            FlowAbortMode = "Self"
                          },
                          SBBTDecorator_SbTimeLimit_0 = {
                            LimitTime = 1.8,
                            ReactInterval = 55,
                            TimerName = "CautionTimer2"
                          }
                        },
                        ObjectName = "SBBTTask_SbCautionToTarget'M_Raven_AI:SBBTTask_SbCautionToTarget_4'",
                        StartTask = {
                          SBBTTask_SbCautionToTarget_4 = {
                            MaxDistance = 1200,
                            SetMoveType = "ESBCautionToTargetMoveType::Side",
                            SideMoveMaxDistance = 1000,
                            SideMoveMinDistance = 600,
                            WaitCheckTime = 4,
                            WaitCountByGroup = 1,
                            bIgnoreRestartSelf = true,
                            bLockOn = true
                          }
                        }
                      },
                      {
                        Condition = {},
                        ObjectName = "SBBTTask_SbMoveToTarget'M_Raven_AI:SBBTTask_SbMoveToTarget_4'",
                        StartTask = {
                          SBBTTask_SbMoveToTarget_4 = {
                            DistanceOfApproach = 250,
                            MoveState = "ESBMoveState::MoveState_Run",
                            NodeName = "SB_MoveToTarget_Run",
                            bBackgroundTask = true
                          }
                        }
                      }
                    },
                    ObjectName = "BTComposite_Selector'M_Raven_AI:BTComposite_Selector_23'"
                  }
                },
                ObjectName = "BTComposite_Selector'M_Raven_AI:BTComposite_Selector_0'"
              }
            },
            ObjectName = "BTComposite_Selector'M_Raven_AI:BTComposite_Selector_35'"
          }
        },
        ObjectName = "BTComposite_Selector'M_Raven_AI:BTComposite_Selector_52'"
      }
    },
    ObjectName = "BTComposite_Selector'M_Raven_AI:BTComposite_Selector_32'"
  }
}



-- walkspeed = 150 
-- default weapon: Raven_Blade 
-- attack power: 1600 
-- skill min / max distances and activate cases are in TargetFilterTable.json 

function ENT:SBAI_SelectTask(taskTable, currentIndex) 
    print("***in selecttask", taskTable, currentIndex)
    currentIndex = currentIndex or 1

    if self.ActiveComposite then
        print("checking self.ActiveComposite")
        local active = self.ActiveComposite
        self.ActiveComposite = nil -- Clear immediately to prevent infinite loops

        print("Resuming from active composite. Parent has", #(active.parent), "children. Starting at child index", active.child)
        
        -- The active.parent IS the table of children we need to iterate.
        -- The active.child IS the index we need to start from.
        -- We simply call ourselves with the restored context.
        return self:SBAI_SelectTask(active.parent, active.child)
    end
    
    -- This function now processes a single composite node at a time.
    -- local subTaskTable = taskTable[1] -- We pass tables like {node}
    -- if !subTaskTable then return false end -- Safety check
    -- currentIndex helps track priority order in Selector (left to right)
    for subTaskNum, subTaskTable in ipairs(taskTable) do
        -- detect composite type from the key
        local objectName = subTaskTable.ObjectName  -- first key string
        local isSelector = objectName and objectName:find("BTComposite_Selector")
        local isSequence = objectName and objectName:find("BTComposite_Sequence")
        print("objectName:", objectName) 
        local allowEntry = true
        local flowAbortMode = nil

        -- Evaluate conditions (decorators)
        if subTaskTable.Condition then
            for subConditionName, subConditionValues in pairs(subTaskTable.Condition) do
                local flowMode = subConditionValues.FlowAbortMode
                if flowMode then flowAbortMode = flowMode end

                print("subConditionName", subConditionName) 
                subConditionName = subConditionName:gsub("^SBBTDecorator_", "") 
                subConditionName = subConditionName:gsub("_%d+$", "")
                local conditionPassed = self[subConditionName](self, subConditionValues) 
                print("Decorator", subConditionName, "returned", conditionPassed) 
                if not conditionPassed then
                    allowEntry = false
                    break
                end
            end
        end
        print("allowEntry", allowEntry,flowAbortMode) 

        -- handle FlowAbortMode before executing
        if flowAbortMode then
            if flowAbortMode == "Self" then
                if not allowEntry and self.CurrentBranch == subTaskNum then
                    self.CurrentBranch = nil
                    self.CurrentSBTask = nil 
                    print("abort self branch") 
                    return nil
                end
            elseif flowAbortMode == "LowerPriority" then
                if allowEntry and currentIndex and subTaskNum < currentIndex then
                    self.CurrentBranch = subTaskNum
                    self.CurrentSBTask = objectName 
					print("FlowAbortMode is in LowerPriority") 
                    return self:SBAI_SelectTask({subTaskTable}, subTaskNum)
                end
            elseif flowAbortMode == "Both" then
                if not allowEntry and self.CurrentBranch == subTaskNum then
                    self.CurrentBranch = nil
                    self.CurrentSBTask = nil 
                    print("aborting entire flow") 
                    return nil
                elseif allowEntry and currentIndex and subTaskNum < currentIndex then
                    self.CurrentBranch = subTaskNum 
                    self.CurrentSBTask = objectName 
                    return self:SBAI_SelectTask({subTaskTable}, subTaskNum)
                end
            end
        end

        -- if entry allowed, execute task or dive deeper
        if allowEntry then
			if not self.CurrentBranch then self.CurrentBranch = subTaskNum end
            if subTaskTable.StartTask then
                print("**in start task")
                for taskKey, taskData in pairs(subTaskTable.StartTask) do
                    local cleanTaskKey = taskKey:gsub("^SBBTTask_", ""):gsub("_%d+$", "")
                    local result = self[cleanTaskKey](self, taskData)
                    print(objectName, "returned", result)

                    if result == nil then
                        -- This task is running. Save state and exit.
                        print("Leaf Saving State: Parent:", taskTable, "Child Index:", i)
                        self.ActiveComposite = {
                            parent = taskTable, -- CORRECT: Save the list of siblings
                            type = "Leaf",
                            child = i           -- CORRECT: Save our own index in that list
                        }
                        return nil
                    end

                    if result == true then
                        if isSelector then return true end -- Selector succeeds immediately.
                        break -- Sequence succeeds, let main loop continue to next task.
                    end
                    
                    if result == false then
                        if isSequence then return false end -- Sequence fails immediately.
                        break -- Selector fails, let main loop continue to next sibling.
                    end
                end
				-- if we reach here, either a StartTask was a check (true without NextTask) and we continue,
                -- or it failed and selector should try next child - so loop continues.
            elseif subTaskTable.NextTask then
                local result = self:SBAI_SelectTask(subTaskTable.NextTask, 1) -- Recurse into children, always starting them from 1

                if result == nil then
                    -- A child branch is running, so we are also running. Save our state and exit.
                    print("Composite Saving State: Parent:", taskTable, "Child Index:", i)
                    self.ActiveComposite = {
                        parent = taskTable, -- CORRECT: Save the list of siblings
                        type = isSequence and "Sequence" or "Selector",
                        child = i           -- CORRECT: Save our own index in that list
                    }
                    return nil
                end

                if isSelector and result == true then return true end
                if isSequence and result == false then return false end
                -- If a sequence child returns true, or a selector child returns false, we let the loop continue.

            end 
        end
    end

    -- If no child returned success/running, return false
    return false
end

function ENT:SBAI_RunBehavior()
	print("RunBehavior start: SysTime:", SysTime()) 
    
	local result = self:SBAI_SelectTask(self.SBAI_BehaviorTree)
	print("BehaviorTree tick finished with result:", result, self.CurrentSBTask)
    
	-- If the result is NOT nil, the tree has completed its path for this tick.
	-- We must clear the active composite to allow a fresh run from the root next time.
	if result != nil then
		print("clearing ActiveComposite") 
		self.ActiveComposite = nil
	end
	print("RunBehavior end: SysTime:", SysTime()) 
end 

function ENT:NPC_GetRunActivity( act ) 
	act = act or ACT_MP_WALK_MELEE 
	return act 
end 

function ENT:NPC_GetWalkActivity( act ) 
	act = act or ACT_MP_WALK_MELEE 
	return act 
end 

function ENT:NPC_TranslateActivity(act) 
	if act == ACT_IDLE then return ACT_HL2MP_IDLE_MELEE_ANGRY end 
	if act == ACT_IDLE_ANGRY then return ACT_HL2MP_IDLE_MELEE_ANGRY end 
	if act == ACT_WALK then return ACT_MP_WALK_MELEE end 
	if IsValid(self:GetActiveWeapon()) then 
		if self:GetActiveWeapon():GetHoldType() == "melee" and act == ACT_WALK then 
			return ACT_MP_WALK_MELEE 
		end 
	end 
end 

function ENT:Think() 
	local retval = scripted_ents.Get("npc_unreali_female").Think(self) 
	if SERVER then 
		self:SBAI_RunBehavior() 
	end 
	return retval 
end 

-- FlowAbortMode: 
-- LowerPriority: If the condition becomes true, the Behavior Tree will abort any currently running tasks in lower-priority branches. It does not abort the current branch where the decorator lives.
-- Self: interrupt current task when decorator meets criteria. proceeds to next tasks   
-- Both: LowerPriority + Self: abort current task and nexttasks whenever this meets true. isalive check 
-- None: do not interrupt task structure, leaving Condition useless 

-- conditions 
function ENT:SbAggroLevel(tbl)
    local arr = tbl.CompareAggroLevelArray
    if not arr then return false end

    -- Defensive: ensure we can iterate
    if type(arr) != "table" then
        arr = { arr }
    end

    for _, level in ipairs(arr) do
        print("Checking AggroLevel:", level)

        -- if level == "AIAggroLevel_Peaceful" and self:GetNPCState() < 2 then
        if level == "AIAggroLevel_Peaceful" and self:GetNPCState() <= 3 then
            return true
        elseif level == "AIAggroLevel_Battle" and self:GetNPCState() == NPC_STATE_COMBAT then
            return true
        end
        -- add more elseif branches here if you support other aggro levels
    end

    return false
end

function ENT:SbAimMe(tbl) -- doesn't have any additional properties 
	return self:NPC_HasCondition(COND.ENEMY_FACING) 
end 

function ENT:SbBlackboard(tbl) 
	if !isbool(tbl.bReturnSucceeded) then -- decorators don't have bReturnSucceeded 
		local CheckValue = tbl.KeyName 
		local testvalue = tbl.IntValue 
		local CompareOP = tbl.CompareOP or "Equal" 
		Entity(1):ChatPrint("SBBlackBoard: "..CheckValue.." "..tostring(testvalue).." "..CompareOP) 
		local testvalue = self.SBAI_BlackBoard[CheckValue] 
		
		if CompareOP == "Equal" then 
			result = testvalue == CheckValue 
		elseif CompareOP == "LessOrEqual" then 
			result = testvalue <= CheckValue 
		elseif CompareOP == "Greater" then 
			result = testvalue > CheckValue 
		elseif CompareOP == "GreaterOrEqual" then 
			result = testvalue >= CheckValue 
		elseif CompareOP == "Less" then 
			result = testvalue < CheckValue 
		elseif CompareOP == "NotEqual" then 
			result = testvalue != CheckValue 
		end 
	return result 
	
	else -- task 
		Entity(1):ChatPrint("SBBlackBoard: "..tbl.KeyName..tostring(tbl.IntValue)..tbl.CompareOP) 
		self.SBAI_BlackBoard[tbl.KeyName] = tbl.IntValue 
		return tbl.bReturnSucceeded 
	end 
	
end -- key - value retriever 

function ENT:SbCheckActorEffect(tbl)
    local ActorType          = tbl.ActorType or "Self"
    local EffectAlias        = tbl.EffectAlias
    local OrCheckArray       = tbl.OrCheck_EffectAliasArray or {}
    local bActive            = tbl.bActive or false
    local bInverseCondition  = tbl.bInverseCondition or false

    -- if decorator disabled, always allow
    if !bActive then return true end

    -- resolve actor
    local ent
    if ActorType == "Target" then
        ent = self:GetEnemy()
    elseif ActorType == "Self" then
        ent = self
    elseif ActorType == "Owner" then
        ent = self:GetOwner()
    elseif ActorType == "SubTarget" then
        for _, subent in pairs(self:GetKnownEnemies() or {}) do
            if IsValid(subent) and subent != self:GetEnemy() then
                ent = subent
                break
            end
        end
    end
    if !IsValid(ent) then return false end

    -- gather effects to check
    local effectsToCheck = {}
    if EffectAlias then
        table.insert(effectsToCheck, EffectAlias)
    end
    for _, v in ipairs(OrCheckArray) do
        table.insert(effectsToCheck, v)
    end

    -- check actor effects
    local hasEffect = false
    for _, eff in ipairs(effectsToCheck) do
        -- normal alias checks
        if ent.SbEffectAlias and ent.SbEffectAlias[eff] then
            hasEffect = true
        elseif ent.EffectAliasArray then
            for _, eff2 in ipairs(ent.EffectAliasArray) do
                if eff2 == eff then
                    hasEffect = true
                    break
                end
            end
        end

        -- post check wrapper: if ENT has a function named after the effect alias, call it 
		print("********* CHECKING EFFECT",eff) 
        local fn = self[eff]
        if type(fn) == "function" then
            local ok, override = pcall(fn, self, ent)
            if ok and override != nil then
                hasEffect = override and true or false
            end
        end

        if hasEffect then break end
    end

    -- apply inverse flag
    if bInverseCondition then
        return not hasEffect
    else
        return hasEffect
    end
end

function ENT:SbCheckActorStat(tbl) 
	print("IN SbCheckActorStat") 
	local CheckStat = tbl.CheckStat -- ActorStatType_AttackSpeed       ActorStatType_StaminaAttackPower        ActorStatType_CriticalPercentage        ActorStatType_HitDefenseLevel   ActorStatType_ShieldIgnorePercentage    ActorStatType_CriticalValueRate ActorStatType_ShieldRegenPerSecond      ActorStatType_AdditiveSkillDamageRate   ActorStatType_ShieldRegenPerSecondRate  ActorStatType_ShieldRegenPerSecondValue ActorStatType_ShieldRegenPerSecondWhenBattleValue       ActorStatType_ShieldRegenPerSecondWhenBattle    ActorStatType_StaminaRegenPerSecond     ActorStatType_ShieldRegenPerSecondWhenBattleRate        ActorStatType_HPRegenPerSecondValue     ActorStatType_HPRegenPerSecond  ActorStatType_SmallWeightTypeDamageAdditiveRate ActorStatType_HPRegenPerSecondRate      ActorStatType_RangeAttackDamageAdditiveRate     ActorStatType_LargeWeightTypeDamageAdditiveRate ActorStatType_RangeAttackDamageReductionRate    ActorStatType_MeleeAttackDamageReductionRate    ActorStatType_GroggyStateDamageAdditiveRate     ActorStatType_DownStateDamageAdditiveRate       ActorStatType_FireAttributeDamageReductionRate  ActorStatType_AirborneStateDamageAdditiveRate   ActorStatType_LightningAttributeDamageReductionRate     ActorStatType_IceAttributeDamageReductionRate   ActorStatType_BetaGaugeAdditiveRate     ActorStatType_PoisonAttributeDamageReductionRate        ActorStatType_LowHpDamageAdditiveRate   ActorStatType_AdditiveFixedDamage       ActorStatType_DOTDamageAdditiveRate     ActorStatType_HighHpDamageAdditiveRate  ActorStatType_TachyGaugeReduceConsumeRate       ActorStatType_TachyGaugeAdditiveGainRate        ActorStatType_FinalShieldDamageReduceRate       ActorStatType_FinalHPDamageReduceRate   ActorStatType_AdditiveSkillDamageGroup1 ActorStatType_Luck      ActorStatType_AdditiveSkillDamageGroup3 ActorStatType_AdditiveSkillDamageGroup2 ActorStatType_AdditiveSkillDamageGroup5 ActorStatType_AdditiveSkillDamageGroup4 ActorStatType_AdditiveSkillDamageGroup7 ActorStatType_AdditiveSkillDamageGroup6 ActorStatType_AdditiveSkillDamageGroup9 ActorStatType_AdditiveSkillDamageGroup8 ActorStatType_DrainHpByAttackPowerRate  ActorStatType_AdditiveSkillDamageGroup10        ActorStatType_SprintableStaminaValue    ActorStatType_DrainHpFixedValue ActorStatType_ItemStackBullet1  ActorStatType_ItemStackRecoveryPotion   ActorStatType_ItemStackBullet3  ActorStatType_ItemStackBullet2  ActorStatType_ItemStackBullet5  ActorStatType_ItemStackBullet4  ActorStatType_ItemStackConsumable1      ActorStatType_ItemStackBullet6  ActorStatType_ItemStackConsumable3      ActorStatType_ItemStackConsumable2      ActorStatType_ItemStackConsumable5      ActorStatType_ItemStackConsumable4      
	local CheckValue = tbl.CheckValue -- 60.0, 
	local CompareOP = tbl.CompareOP -- Greater 
	local bRateValue = tbl.bRateValue or false -- true 
	local NodeName = tbl.NodeName -- SB_CheckActorStat(HP>60) 
	-- handle only ActorStatType_HP for now 
	local testvalue, result 
	if CheckStat == ActorStatType_HP then 
		testvalue = self:Health() 
		testvalue = (testvalue / self:GetMaxHealth()) * 100 
	else 
		testvalue = 0 
	end 
	if CompareOP == "Equal" then 
		result = testvalue == CheckValue 
	elseif CompareOP == "LessOrEqual" then 
		result = testvalue <= CheckValue 
	elseif CompareOP == "Greater" then 
		result = testvalue > CheckValue 
	elseif CompareOP == "GreaterOrEqual" then 
		result = testvalue >= CheckValue 
	elseif CompareOP == "Less" then 
		result = testvalue < CheckValue 
	elseif CompareOP == "NotEqual" then 
		result = testvalue != CheckValue 
	end 
	return result 
end 

function ENT:SbCheckStance(tbl) -- M_Raven_Phase2, M_Raven_Default 
	Entity(1):ChatPrint("StanceName "..tbl.StanceName)
	if true then 
		return "M_Raven_Default" == tbl.StanceName 
	end 
	return self.StanceName == tbl.StanceName 
end 

function ENT:SbDetectResult(tbl) 
	-- AIDetectResult_NotDetect AIDetectResult_Observe AIDetectResult_Doubt	AIDetectResult_Detect 
	local CompareDetectResult = tbl.CompareDetectResult 
	-- right now, check whether there is an enemy (AIDetectResult_Detect) 
	-- print("SbDetectResult will directly return true") 
	return IsValid(self:GetEnemy()) 
end 

function ENT:SbDistanceToTarget(tbl) -- distance to enemy 
	-- if !self.enemyDist then return false end 
	local dist = tbl.Distance 
	local operator = tbl.CompareOP -- LessOrEqual, Greater, GreaterOrEqual, Equal, Less, NotEqual 
	local FlowAbortMode = tbl.FlowAbortMode or "None" 
	local result 
	if operator == "Equal" then 
		result = self.enemyDist == dist 
	elseif operator == "LessOrEqual" then 
		result = self.enemyDist <= dist 
	elseif operator == "Greater" then 
		result = self.enemyDist > dist 
	elseif operator == "GreaterOrEqual" then 
		result = self.enemyDist >= dist 
	elseif operator == "Less" then 
		result = self.enemyDist < dist 
	elseif operator == "NotEqual" then 
		result = self.enemyDist != dist 
	end 
	print("DistanceToTarget:",dist,operator,FlowAbortMode) 
	return result 
end 

function ENT:SbIsAlive(tbl) 
	local ActorType = tbl.ActorType -- Target, Self, SubTarget, Owner. Default: Self 
	local CheckType = tbl.CheckType -- Coma, Dead, Alive. Default: Alive 
	-- print("ActorType",ActorType) 
	local ent = ActorType == "Target" and self:GetEnemy() or ActorType == "Self" and self or ActorType == "Owner" and self:GetOwner() or self 
	-- print(self, "checking ent:",ent) 
	if ActorType == SubTarget then 
		for _,subent in pairs(self:GetKnownEnemies()) do 
			if IsValid(subent) then 
				if IsValid(self:GetEnemy()) then 
					if self:GetEnemy() != subent then 
						ent = subent 
					end 
				end 
			end 
		end 
	end 
	
	-- for now, just return true 
	if true then return true end 
	
	if CheckType == "Coma" then 
		return ent:GetInternalVariable("m_lifeState") == 1 
	end 
	return CheckType == "Alive" and ent:Alive() or !ent:Alive() 
end 

function ENT:SbRandom(tbl) 
	local RandomRange = math.random(0,tbl.RandomRange) 
	local CheckValue = tbl.CheckValue 
	local operator = tbl.CompareOP -- LessOrEqual, Greater, GreaterOrEqual, Equal, Less, NotEqual 
	local result 
	if operator == "Equal" then 
		result = RandomRange == CheckValue 
	elseif operator == "LessOrEqual" then 
		result = RandomRange <= CheckValue 
	elseif operator == "Greater" then 
		result = RandomRange > CheckValue 
	elseif operator == "GreaterOrEqual" then 
		result = RandomRange >= CheckValue 
	elseif operator == "Less" then 
		result = RandomRange < CheckValue 
	elseif operator == "NotEqual" then 
		result = RandomRange != CheckValue 
	end 
	return result 
end 

function ENT:SbTimeLimit(tbl)
    if !self.SBAI_TimeLimit then
        self.SBAI_TimeLimit = {}
    end

    local name         = tbl.TimerName or "DefaultTimer"
    local limit        = tbl.LimitTime or 0
    local react        = tbl.ReactInterval or 0
    local now          = CurTime()
    local timerData    = self.SBAI_TimeLimit[name]

    -- If no timer exists, start one now
    if !timerData then
        self.SBAI_TimeLimit[name] = {
            expire = now + limit,
            cooldown = 0
        }
        return true
    end

    -- If currently within active limit window
    if now <= timerData.expire then
        return true
    end

    -- If cooldown hasn’t been set yet, set it
    if timerData.cooldown == 0 and react > 0 then
        timerData.cooldown = now + react
        self.SBAI_TimeLimit[name] = timerData
    end

    -- If still in cooldown, block entry
    if timerData.cooldown > now then
        return false
    end

    -- Otherwise, reset timer and allow again
    self.SBAI_TimeLimit[name] = {
        expire = now + limit,
        cooldown = 0
    }
    return true
end

function ENT:SbUseableTime(tbl)
    local KeyName = tbl.KeyName
    self.SBAI_Timers = self.SBAI_Timers or {}

    local expireTime = self.SBAI_Timers[KeyName]
    local cycle      = self.SBAI_Timers[KeyName.."_Cycle"]

    if expireTime then
        if CurTime() < expireTime then
            -- Timer still active → block this branch
            return false
        else
            -- Timer expired
            if cycle and cycle > 0 then
                -- Auto - rearm: push expiry forward by cycle time
                self.SBAI_Timers[KeyName] = CurTime() + cycle
                return false  -- still blocked this tick, will open next time
            end
        end
    end

    -- No timer or expired with no cycle → allow entry
    return true
end


-- skills 

function ENT:SbCautionToTarget(tbl) 
	local MaxDistance = tbl.MaxDistance 
	local SetMoveType = tbl.SetMoveType 
	local SideMoveMaxDistance = tbl.SideMoveMaxDistance 
	local SideMoveMinDistance = tbl.SideMoveMinDistance 
	local WaitCheckTime = tbl.WaitCheckTime 
	local WaitCountByGroup = tbl.WaitCountByGroup 
	local bIgnoreRestartSelf = tbl.bIgnoreRestartSelf 
	local bLockOn = tbl.bLockOn 
	-- create random route 
	-- set walk type 
	-- now delay 
	local waitTime = tbl.WaitCheckTime or 0
    -- local returnSucceeded = tbl.bReturnSucceeded or false

    if !tbl.startTime then -- TASKSTATUS_NEW 
        tbl.startTime = SysTime()
		self:StartSchedule(LUASCHED_RANDOM_NONAV_GO) 
    end
	self:SetMovementActivity(ACT_MP_WALK_MELEE) -- do the cautious move 
    local elapsed = SysTime() - tbl.startTime
    print("in SbCautionToTarget", elapsed, waitTime)

    if elapsed < waitTime then
        return nil -- still running
    else
		Entity(1):ChatPrint("SbCautionToTarget: finishing "..tbl.startTime) 
		tbl.startTime = nil
		if true then return true end -- temporary: remove this when branch selection issues are solved 
        if returnSucceeded then
            return true  -- wait succeeded
        else
            return false -- wait failed
        end
    end
end 

function ENT:SbDetectTarget(tbl) 
	local bEnemy, bComa = tbl.bEnemy, tbl.bComa 
	-- right now just return true instead of searching for enemy 
	-- print("in sbdetecttarget. this will directly return true") 
	return IsValid(self:GetEnemy()) 
end 

function ENT:SbMoveToTarget(tbl) 
	local MoveState = tbl.MoveState
	local DistanceOfApproach = tbl.DistanceOfApproach
	local bBackgroundTask = tbl.bBackgroundTask
	local NodeName = tbl.NodeName 
	
	tbl.StartPos = tbl.StartPos or self:GetPos() 
	if self:GetPos():Distance(tbl.StartPos) > 250 then return true end -- moved away from task start pos by 250 units 
end 

function ENT:SbUseEffect(tbl) end 
function ENT:SbUseSkill(tbl) 
	PrintTable(tbl) 
end 
function ENT:SbUseableTimeReset(tbl)
    local KeyName = tbl.KeyName
    self.SBAI_Timers = self.SBAI_Timers or {}

    local initial = tbl.SetInitialTimeValue or 0
    local cycle   = tbl.SetCycleTimeValue or -1

    -- First activation: set expiry to now + initial
    self.SBAI_Timers[KeyName] = CurTime() + initial

    -- Store cycle info if needed
    if cycle and cycle > 0 then
        self.SBAI_Timers[KeyName.."_Cycle"] = cycle
    else
        self.SBAI_Timers[KeyName.."_Cycle"] = nil
    end

    return "Success"
end


function ENT:SbWait(data)
    local waitTime = data.WaitTime or 0
    local returnSucceeded = data.bReturnSucceeded or false

    if !data.startTime then
        data.startTime = SysTime()
    end

    local elapsed = SysTime() - data.startTime
    print("in SbWait", elapsed, waitTime)

    if elapsed < waitTime then
        return nil -- still running
    else
		if true then return true end -- temporary: remove this when branch selection issues are solved 
        data.startTime = nil
        if returnSucceeded then
            return true  -- wait succeeded
        else
            return false -- wait failed
        end
    end
end

function ENT:Item_Resurrection_Ground(ent) return true end 